/* ==UserStyle==
@name         GitLab Dark by Mew
@namespace    gitlab.com/vednoc/gitlab-dark
@version      0.20.0
@description  Dark theme for GitLab.
@author       vednoc
@homepageURL  https://gitlab.com/vednoc/dark-gitlab
@supportURL   https://gitlab.com/vednoc/dark-gitlab/issues
@updateURL    https://gitlab.com/vednoc/dark-gitlab/raw/master/gitlab.user.styl
@preprocessor stylus

@var text     max_width "Maximum width for fluid layout" 100%
@var text     code_font "Custom code font" ""custom_font", "Menlo", "DejaVu Sans Mono", "Liberation Mono", "Consolas", "Ubuntu Mono", "Courier New", "andale mono", "lucida console", monospace"
@var checkbox p_header  "Center project header elements" 0
@var checkbox dark_logo "Switch to our darker logo" 0
@var text     b_radius  "Custom border radius" 4px
@var text     a_radius  "Custom avatar radius" 50%
@var checkbox navbar_c  "Theme navbar color" 1
@var checkbox checkbox  "Checkbox inversion" 1
@var checkbox bg_invert "Background inversion" 1
@var text     bg_image  "Background url/base64" "url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAA7SURBVCiRY2BgYHBgQABbBgaGlwwMDE4ExBwYGBheMRBQRJQY/TUyQN3uQIZGBzhBhsbRACNR44gMMADUtz9VRtuY9AAAAABJRU5ErkJggg==")"
@var text     bg_filter "Background filters" opacity(0.05)
@var text     bg_size   "Background size" 15px
@var text     bg_repeat "Background repeat" repeat
@var text     bg_pos    "Background position" center

@var color dark    "Dark color."    #2e2e2e
@var color darker  "Darker color."  #212121
@var color light   "Light color."   #d1d1d1
@var color lighter "Lighter color." #e9e9e9
@var color icon    "Icon color."    #e1e1e1
@var color accent  "Accent color."  #7289da
@var color yellow  "Yellow color."  #f0c674
@var color orange  "Orange color."  #de935f
@var color red     "Red color."     #a54242
@var color magenta "Magenta color." #b294bb
@var color violet  "Violet color."  #85678f
@var color blue    "Blue color."    #5f819d
@var color cyan    "Cyan color."    #5e8d87
@var color green   "Green color."   #8c9440
@var color shadow  "Shadow"         rgba(0,0,0,0.07)

==/UserStyle== */

@-moz-document regexp("https?://(.*)?(gitlab\.(?!io).*|gitgud.io|salsa.debian.org|framagit.org|source.joinmastodon.org|repo.getmonero.org|your.custom.domain)(/.*)?") {
  :root {
    --note      : "DarkGitlab v0.20.0";
    --dark      : dark;
    --darker    : darker;
    --light     : light;
    --lighter   : lighter;
    --accent    : accent;
    --icon      : icon;
    --shadow    : shadow;
    --box-shadow: 0 2px 3px 0 var(--shadow);
    --yellow    : yellow;
    --orange    : orange;
    --red       : red;
    --magenta   : magenta;
    --violet    : violet;
    --blue      : blue;
    --cyan      : cyan;
    --green     : green;
    --t         : transparent !important;
    --width     : max_width;
    --radius    : b_radius;
    --avatar    : a_radius;
    --code-font : code_font;
    --bg-invert : bg_invert;
    --bg-filter : bg_filter;
    --bg-size   : bg_size;
    --bg-repeat : bg_repeat;
    --bg-pos    : bg_pos;
    --background: bg_image
  }

  // * Use stylus-lang variables with CSS variables.
  // TODO try to make this more compact.
  $dark    = var(--dark);
  $darker  = var(--darker);
  $light   = var(--light);
  $lighter = var(--lighter);
  $accent  = var(--accent);
  $icon    = var(--icon);
  $shadow  = var(--shadow);
  $yellow  = var(--yellow);
  $orange  = var(--orange);
  $red     = var(--red);
  $magenta = var(--magenta);
  $violet  = var(--violet);
  $blue    = var(--blue);
  $cyan    = var(--cyan);
  $green   = var(--green);
  $radius  = var(--radius);
  $t       = var(--t);
  $box     = var(--box-shadow);

  // * Color mixin.
  // ? All colors -> colors: $light, $darker, $dark;
  // ? Only background-color -> colors: 0, 0, $dark;
  colors(x, y, z) {
    if x is a 'call' {
      color: x !important;
    }
    if y is a 'call' {
      border-color: y !important;
    }
    if z is a 'call' {
      background-color: z !important;
    }
  }

  // * Border radius mixin.
  radius() {
    -webkit-border-radius: arguments;
    -moz-border-radius: arguments;
    border-radius: arguments;
  }

  ::-webkit-scrollbar {
    width: 12px;
    &-track { background: $dark; }
    &-thumb {
      border: 2px solid $dark;
      background: $darker;
    }
  }
  // Input placeholder.
  input::placeholder {
    color: $lighter !important;
  }
  ::-webkit-input-placeholder {
    color: $lighter !important;
  }

  h1, h2, h3, h4, h5, h6, p {
    color: var(--light) !important;
  }
  ul, ol { color: $light; }
  a {
    transition: 200ms ease-in-out;
    color: $accent;
    &:hover, &:focus { color: $accent; }
  }
  hr {
    border-top: none;
    colors: 0, $shadow, $shadow;
  }
  img.transparent,
  img.lazy {
    border: 1px solid var(--dark) !important;
    background: transparent !important;
  }
  code {
    border: 1px solid var(--darker);
    background-color: var(--dark);
  }
  table td {
    background-color: var(--dark);
  }
  // Fix emojis being cropped.
  gl-emoji {
    line-height: 1.20em;
  }
  // Time element.
  time {
    color: $light;
  }

  // * Icons!
  .fa, svg {
    color: $icon !important;
    fill: $icon !important;
    // TODO Remove?
    &:hover { opacity: 0.8 !important; }
  }
  // * Fix icons that need extra path selector.
  // ? Calendar, add reaction, commit icon.
  // TODO add missing icons here.
  .nav-controls .has-tooltip svg > path,
  .award-control-icon svg path,
  .commit-icon path {
    fill: $icon !important;
  }

  // * Bootstrap reset.
  .bg {
    &-white { colors: 0, 0, $dark; }
    &-info { colors: 0, 0, $darker; }
  }
  .text {
    &-white { colors: $light, 0, 0; }
    &-tertiary { colors: $lighter, 0, 0; }
    &-secondary { colors: $light, 0, 0; }
    &-danger { colors: $red, 0, 0; }
  }
  .badge {
    &.unverified { colors: $lighter, $lighter, $dark; }
    &.verified { colors: $green, $green, $dark; }
    &-success { colors: $light, 0, $green; }
    &-primary { colors: $light, 0, $blue; }
    &-pill { colors: $light, 0, 0; }
  }
  // TODO move to dashboard or somewhere else.
  .badge-pill {
    &.issues-count { colors: var(--white), 0, $green; }
    &.merge-requests-count { colors: var(--white), 0, $orange; }
    &.todos-count { colors: var(--white), 0, $blue; }
  }
  .shortcut-mappings .key {
    color: var(--light) !important;
  }
  .cgray,
  .committed_ago,
  .hint {
    color: var(--lighter) !important;
  }
  .warning_message {
    radius: 0 $radius $radius 0;
    border-left-color: $accent;
    colors: $light, 0, $darker;
  }
  // Alerts.
  .bs-callout {
    radius: $radius;
    colors: $light, $darker, $dark;
    &.gcp-signup-offer { border-left-color: $blue !important; }
  }
  // .../settings/ci_cd
  .card-footer > pre {
    radius: $radius;
    colors: $light, $darker, $dark;
  }

  // * Button reset.
  .btn {
    transition: transform 0.2s ease-in-out !important;
    color: var(--light);
    border-color: var(--darker);
    background-color: var(--dark);
    &:hover, &:focus, &.focus, &.btn-default {
      color: var(--light);
      border-color: var(--darker);
      background-color: var(--dark);
    }
    &:active, &.active {
      colors: $accent, $darker, $dark;
      // Active icons!
      // TODO Remove?
      > i, > .fa { color: inherit !important; }
    }
    // Remove blue outline.
    &:focus, &.focus { box-shadow: 0 0 2px 0px $accent; }
    &-link { colors: $accent, 0, 0; }
  }
  // Colored buttons.
  .btn {
    // Green buttons.
    &-success,
    &-success.dropdown-toggle,
    &-register,
    &.comment-btn,
    &-new,
    &-create,
    &-save,
    .comment-btn,
    .commit-btn {
      colors: var(--white), $green, $green;
      box-shadow: var(--box-shadow) !important;
    }
    // Blue buttons.
    &-info,
    &-primary,
    &-register {
      colors: var(--white), $blue, $blue;
      box-shadow: var(--box-shadow) !important;
    }
    // Orange buttons.
    &-warning {
      colors: var(--white), $orange, $orange;
      box-shadow: var(--box-shadow) !important;
    }
    // Close buttons.
    &-close,
    &-close-color,
    &-close-color.dropdown-toggle {
      colors: var(--white), $red, $red;
      box-shadow: var(--box-shadow) !important;
    }
    &-cancel { colors: var(--white), $darker, $darker; }
    // Remove buttons.
    &-danger,
    &-remove,
    &-red {
      colors: var(--white), $red, $red;
      box-shadow: var(--box-shadow) !important;
    }
    // Inverted buttons.
    &-inverted.btn-remove {
      colors: var(--white), $red, $red;
      box-shadow: var(--box-shadow) !important;
    }
    // Blank buttons.
    &-blank, &-clipboard {
      colors: $lighter, 0, $t;
    }
    // Comment on a note.
    &-text-field {
      colors: $lighter, $darker, $darker;
    }
    // Reset for "add x" buttons.
    &-missing {
      border-style: solid !important;
      colors: $light, $darker, $dark;
    }
    // Disabled buttons.
    &.disabled, &.disabled:hover,
    &[disabled], &[disabled]:hover {
      opacity: 0.6 !important;
      colors: $lighter, $darker, $darker;
      box-shadow: var(--box-shadow) !important;
    }
    // On event.
    &:hover:not([disabled="disabled"]),
    &:focus:not([disabled="disabled"]) {
      transform: translateY(-2px);
    }
    // Disable hover state for disabled elements.
    &.disabled:hover {
      transform: translateY(0px);
    }
  }
  // ? Button groups.
  .input-group-btn, .input-group-prepend, .input-group-append {
    colors: 0, 0, $t;
    .btn:focus { colors: 0, 0, $darker; }
  }
  // ? Reaction buttons.
  .award-control {
    &.is-active, &.user-authored { colors: $light, $darker, $dark; }
    // Reacted to.
    &.active { colors: $light, $blue, $dark; }
  }

  // * Project notifications.
  // TODO move to appropriate section.
  .project-feature-toggle {
    colors: 0, 0, $darker;
    &.is-checked { colors: 0, 0, $accent; }
    .toggle-icon { colors: 0, 0, $dark; }
  }

  // Issue/Merge status.
  .status-box {
    &-mr-merged { colors: $light, 0, $blue; }
    &-mr-closed { colors: $light, 0, $red; }
    &-open { colors: $light, 0, $green; }
    &-issue-closed { colors: $light, 0, $blue; }
  }

  /* Global styles. */
  [class*="committer-link"],
  [class*="author-link"],
  .author_name a {
    color: $accent !important;
  }
  .nav-links:not(.quick-link) {
    border-bottom-color: $t;
  }
  .label-bold { color: $light; }
  if checkbox {
    input[type="checkbox"] { filter: invert(var(--bg-invert)) !important; }
  }
  // ? Move to a better place.
  .option-title { colors: $light, 0, 0; }
  .option-description, .option-disabled-reason {
    colors: $lighter, 0, 0;
  }
  // ? Check #13 for more info.
  .deployment-info, .js-deploy-time { colors: $light, 0, 0; }
  // * Grid styles.
  .flex-grid {
    .grid-row { colors: 0, $darker, 0; }
    .grid-cell {
      colors: 0, $darker, 0;
      .property-label { colors: $lighter, 0, 0; }
    }
  }

  // Sign in page.
  body, body.navless {
    colors: $light, 0, $t;
    // Navbar.
    .navbar-empty { colors: 0, $darker, $darker; }
  }

  // * Sign in/register page.
  .login-page {
    // Header.
    .new-session-tabs {
      border-color: $darker;
      box-shadow: 0 0 0 1px $darker;
      li {
        colors: $lighter, $darker, $darker;
        a.active, a:hover { colors: $light, $accent, $darker; }
      }
    }
    // Credentials.
    .login-box {
      radius: 0 0 $radius $radius;
      box-shadow: 0 0 0 1px $darker;
      background-color: $dark;
      .form-control { colors: 0, 0, $darker; }
    }
    // Sign in with.
    .omniauth-container {
      radius: $radius;
      colors: 0, 0, $dark;
      box-shadow: 0 0 0 1px $darker;
      .omniauth-btn { colors: 0, 0, $darker; }
    }
  }

  /* Misc text color. */
  .light,
  .description-block,
  .task-list-item {
    color: var(--light) !important;
  }

  /* Footer. */
  hr.footer-fixed {
    border-top-color: var(--darker);
    background: none !important;
  }
  .footer-container {
    background: none !important;
  }
  .footer-container a {
    color: var(--accent);
  }

  // * Cookies.
  #CybotCookiebotDialog {
    colors: $light, 0, $darker;
    box-shadow: 0 0 4px 0 $shadow;
    // Buttons.
    [id*="ButtonsSelectPane"] { colors: 0, $dark, $dark; }
    // Show/hide details button.
    [id*="DetailsWrapper"] {
      colors: $accent, $dark, $accent;
      a { color: $light; }
    }
    // Show details.
    [id*="DialogDetail"] {
      border-width: 1px;
      colors: $light, $dark, $darker;
      [id*="BodyContentTabs"] { border-color: $red; }
      a {
        colors: $accent, $dark, 0;
        &:hover, &[class*="Selected"] { colors: 0, 0, $dark; }
      }
      thead th { colors: $light, $dark, $dark; }
      tbody td { colors: $light, $dark, $t; }
    }
  }

  // * Navbar.
  .navbar {
    colors: 0, $darker, 0;
    box-shadow: $box !important;
    // ? UserCSS: Theme navbar color.
    if navbar_c { colors: 0, 0, $darker; }
    // Logo text color.
    .logo-text svg { fill: $light !important; }
    // Search.
    .search form {
      colors: $lighter, $dark, $dark;
      #search { colors: $lighter, 0, 0; }
    }
    // Colors for buttons and links.
    a, button {
      transition: background 0.2s ease-in-out;
      &:hover, &:focus { colors: $light, 0, $dark; }
    }
    // Active tab.
    &-sub-nav > li.active > *, &-nav > li.active > a { colors: $light, 0, $dark; }
    // Change the background for active dropdowns.
    .dropdown.show > button { colors: 0, 0, $dark; }
    // Navbar separator on mobile devices.
    &-toggler { border-left-color: $dark !important; }
    // Active dropdowns.
    .dropdown.show {
      > a { colors: $light, 0, $dark; }
      // ? Reset button hover state in dropdowns.
      button.btn:hover { transform: none !important; }
    }
    // ? Shows theme version in the user dropdown.
    .header-user li:last-child::before {
      content: var(--note);
      display: block;
      padding: 4px 12px 8px;
      border-bottom: 1px solid $shadow;
      color: $light;
    }
  }

  /* Dropdowns. */
  .dropdown-menu,
  .dropdown-menu-nav {
    box-shadow: var(--box-shadow) !important;
    border-color: var(--darker);
    background-color: var(--darker);
  }
  /* Loading. */
  [class*="dropdown-loading"] {
    background-color: var(--dark);
  }
  .fa-spinner:before {
    color: var(--light);
  }
  /* Title. */
  .dropdown-title {
    color: var(--lighter);
    border-bottom-color: var(--darker);
  }
  /* Dropdown toggle. */
  .dropdown-toggle,
  .dropdown-menu-toggle {
    color: var(--light);
    border-color: var(--darker) !important;
    background-color: var(--dark);
  }
  /* Dropdown search. */
  .dropdown-input-field,
  .default-dropdown-input {
    colors: $light, $darker, $dark;
  }
  // * Frequently visited.
  [class*="frequent-items"] {
    .section-header { color: $light !important; }
    .section-empty, [class*="namespace"]  {
      color: $lighter !important;
    }
  }
  // ? Prevent active/open dropdown from having wrong background-color.
  .dropdown-menu.frequent-items-dropdown-menu.show { colors: 0, 0, $darker; }
  /* On event. */
  .dropdown-input-field:focus,
  .default-dropdown-input:focus {
    border-color: var(--blue);
    box-shadow: 0 0 1px 3px var(--shadow);
  }
  /* Separator. */
  .divider,
  .dropdown-divider,
  .dropdown-menu .divider,
  .dropdown-menu [class*="dropdown-sidebar"] {
    border-color: $shadow;
    background-color: $t;
  }
  /* Items. */
  .dropdown-menu li a,
  .dropdown-menu li button,
  .dropdown-menu li .menu-item,
  .dropdown-menu .current-user,
  .navbar-sub-nav {
    color: var(--light) !important;
  }
  .dropdown-header,
  .dropdown-bold-header {
	color: var(--lighter) !important;
  }
  /* On event. */
  .dropdown-menu li button:hover,
  .dropdown-menu li a:not(.disable-hover):hover,
  .dropdown-menu li a:focus,
  .dropdown-menu li a.is-focused,
  .dropdown-menu .droplab-item-selected > .menu-item,
  .dropdown-menu > li:hover > .menu-item {
    color: var(--light);
    background-color: var(--shadow) !important;
  }
  .dropdown.show > a > *, .dropdown.show > button > *, .show > button, .show > button > *, .show > #notifications-button,
  .show > #clone-dropdown > *,
  #nav-projects-dropdown > button[aria-expanded="true"], #nav-groups-dropdown > button[aria-expanded="true"] {
	transition: none !important;
    transition-delay: none !important;
	color: var(--accent) !important;
	fill: var(--accent) !important;
  }
  /* Text color. */
  .dropdown-menu-inner-content,
  .dropdown-toggle-text.is-default {
    color: var(--light);
  }
  .dropdown-menu-inner-title,
  .dropdown-menu .form-group label {
    color: var(--lighter);
  }
  /* Icon colors. */
  .nav a svg,
  .nav .dropdown.show a:hover svg {
    fill: var(--icon) !important;
  }

  // * Dropdown.
  // TODO unfinished.
  .dropdown {
    // Fix the double scrollbar.
    &.show .dropdown-menu {
      max-height: 340px !important;
    }
    // On event.
    &-item {
      transition: background 0.15s ease-in-out;
      &:hover, &:focus {
        color: var(--light);
        background-color: var(--dark);
      }
    }
    // Shadow.
    &-content-faded-mask::after {
      background: none;
    }
  }

  /* A brand new dropdown? */
  .select2-drop,
  .select2-drop.select2-drop-above {
    color: var(--light);
    border-color: var(--darker);
    background-color: var(--darker);
  }
  /* Flashing on input. */
  .select2-container-multi .select2-choices .select2-search-field input.select2-active {
    background: var(--dark) !important;
  }
  /* Input/select elements. */
  .select2-choice,
  .select2-drop input,
  .select2-container-multi .select2-choices {
    color: var(--light) !important;
    border-color: var(--darker) !important;
    background-color: var(--dark) !important;
  }
  /* Text color. */
  .select2-drop .select2-result-label {
    color: var(--light) !important;
  }
  /* On event. */
  .select2-results .select2-highlighted,
  .select2-default {
    color: var(--lighter) !important;
  }
  .select2-results .select2-highlighted .select2-result-label {
    background-color: var(--darker);
  }
  .select2-results .select2-highlighted .select2-result-label:hover {
	  background-color: var(--shadow) !important;
  }
  .select2-arrow {
    padding-left: 10px;
    background-color: var(--dark) !important;
  }


  // * Dashboard :: New project.
  .gitlab-tabs {
    radius: $radius $radius 0 0;
    colors: 0, $darker, $darker;
    .nav-link.active, .nav-link:hover { radius: 0; }
    li:not(:last-child) { border-right-color: $darker; }
    li a.active, li a:hover { colors: $lighter, $accent, $dark; }
  }
  // Tab content.
  .gitlab-tab-content {
    radius: 0 0 $radius $radius;
    colors: 0, $darker, $dark;
    // Inputs.
    [class*="input-group"] {
      radius: $radius;
      colors: $lighter, $darker, $darker;
    }
    .template-option { colors: 0, $darker, 0; }
  }
  .account-btn-link,
  .profile-settings-sidebar a,
  .settings-sidebar a {
    color: var(--accent);
  }
  /* Form control. */
  .form-control {
    colors: $lighter, $darker, $dark;
    // transition: border-color 200ms ease-in-out !important;
    &:focus {
      colors: 0, $blue, 0;
      box-shadow: 0 0 2px 1px $shadow;
    }
  }

  // * Tables.
  .table-responsive {
    radius: $radius;
    border: 1px solid;
    colors: 0, $darker, $dark;
    // Remove extra margin.
    > .table {
      margin-bottom: 0px;
      tr:hover > td { colors: 0, 0, $darker; }
    }
    // Imported projects.
    .table-success,
    .table-success > td {
      colors: 0, 0, $darker;
    }
  }


  // * User Settings :: Everything.
  .settings-message {
    colors: $light, $darker, $dark;
  }
  /* Social icons. */
  .provider-btn-group {
    border-color: var(--darker);
    background: var(--darker) !important;
  }
  .provider-btn-image {
    border-color: var(--darker);
  }
  .provider-btn {
    color: var(--accent) !important;
    background-color: var(--darker);
  }
  /* Path. */
  .input-group-text { colors: $light, $darker, $darker; }
  /* Linked emails. */
  .account-well { colors: $light, $darker, $dark; }
  /* List items. */
  ul.bordered-list > li { border-bottom-color: $darker; }
  /* Active sessions. */
  .card .list-group-item {
    border: 1px solid !important;
    colors: $light, $darker, $dark;
  }
  /* Pipeline quota table. */
  .pipeline-quota,
  .table tr td {
    border-color: var(--darker) !important;
  }
  .pipeline-quota .progress {
    box-shadow: 0 0 0 1px var(--shadow);
    background-color: var(--darker);
  }
  /* Text color. */
  .text-muted,
  .description {
    color: var(--light) !important;
  }
  .profile-settings-content a {
    color: var(--accent);
  }
  .form-control::placeholder {
    color: var(--light) !important;
  }

  // * Alerts.
  .alert-wrapper {
    display: flex;
    flex-direction: column;
    // Move breadcrumbs to the last spot.
    > nav { order: 999; }
    // Colors and resets for alerts.
    .flash-notice {
      margin-bottom: 0px !important;
      border: none !important;
      colors: $light, 0, $blue;
    }
    .alert-warning {
      border: none !important;
      colors: $light, 0, $orange;
    }
    .alert-link { colors: $lighter, 0, 0; }
  }
  // Customers page, possible refactor.
  .alert-danger {
    colors: $light, $red, $red;
  }

  // * Bootstrap breadcrumbs.
  .breadcrumbs {
    colors: $light, 0, 0;
    // Wrapper.
    .breadcrumbs-container {
      padding: 0 1em;
      margin-top: 0.8rem;
      radius: $radius;
      border: 1px solid;
      colors: 0, $darker, $dark;
    }
    &-list a { colors: $lighter, 0, 0; }
    // Highlighted link.
    &-sub-title a { colors: $light, 0, 0; }
    // Separator on mobile devices.
    @media (max-width: 576px) {
      .toggle-mobile-nav + .breadcrumbs-links { colors: $lighter, $darker, 0; }
    }
  }
  .breadcrumb {
    .breadcrumb-item a {
      colors: $lighter, 0, 0;
    }
  }

  // * Dashboard :: Page title.
  .page-title-holder {
    border: none;
    .page-title { margin: 0; }
  }

  // * Dashboard :: Project navigation.
  .nav-block .nav-links {
    padding: 0 8px;
    radius: $radius;
    border: 1px solid;
    colors: 0, $darker, $dark;
  }

  // * Navigation.
  .nav-links {
    border-bottom: none;
    // Links.
    li {
      a { colors: $lighter, 0, 0; }
      // On focus.
      > a:focus { colors: $light, $darker, 0; }
      // Active tabs.
      &.active > a, &:hover > a:not(.btn-missing) { colors: $light, $accent, 0; }
      // Badges.
      a .badge.badge-pill { colors: $lighter, 0, $darker; }
    }
  }

  /* Nav section. TODO: Fix the fixed layout version. */
  .container-fluid > .top-area {
    margin-top: 10px;
    padding: 0 10px;
    radius: $radius;
    border: 1px solid var(--darker);
    background-color: var(--dark);
  }
  /* Wrapper. */
  .top-area,
  .wiki-page-header {
    border-bottom-color: var(--darker);
  }


  // * Settings :: Billing.
  .billing-plans {
    [class*="card"] {
      background-color: $dark !important;
      // Header.
      .card-header { colors: 0, 0, $accent; }
      // Borders.
      &.current .card-body { colors: 0, $accent, 0; }
      &:not(.current) .card-body { colors: 0, $dark, 0; }
      /* Items. */
      .feature-list li { background-color: $darker !important; }
      // Pricing.
      .price-per-month { color: $accent !important; }
      .price-per-year { color: $green !important; }
    }
  }

  // * Purchases.
  // ? https://customers.gitlab.com/customers/sign_up
  .sign-in .white-card {
    color: $light;
    border-color: $darker;
    background-color: $dark;
    .title { colors: 0, $darker, $darker; }
    label { color: $lighter; }
    select, option, input {
      colors: $lighter, 0, $darker;
      box-shadow: none;
    }
    // Select one.
    .chosen-container {
      // Results.
      .chosen-drop {
        colors: 0, $darker, $darker;
        box-shadow: none !important;
        .chosen-results {
          colors: $light, 0, 0;
          .highlighted {
            colors: $light, 0, $accent;
            background-image: none;
          }
        }
      }
      // Input element.
      .chosen-single {
        min-height: 34px;
        line-height: 34px;
        colors: $light, $darker, $darker;
        background-image: none !important;
        box-shadow: none !important;
        // Caret position.
        b { background-position: 0px 6px !important; }
      }
    }
    // Register button.
    .btn-gitlab {
      colors: 0, $darker, 0;
      transition: all 0.2s ease-in-out !important;
      &:hover, &:focus, &:active { colors: $light, $accent, $accent; }
    }
  }

  /* SSH Keys. */
  // pre,
  code.key-fingerprint { colors: $lighter, $darker, $darker; }


  // * Projects list.
  .projects-list {
    margin: 10px 0;
    radius: $radius;
    box-shadow: inset 0 0 0 1px $darker;
    background-color: $dark;
    // Items.
    > li {
      padding: 8px;
      transition: all 0.15s ease-in-out;
      border-bottom-color: $darker;
      // On event.
      &:hover { background-color: $darker; }
      // ? Round corners on first and last child.
      &:first-child { radius: $radius $radius 0 0; }
      &:last-child { radius: 0 0 $radius $radius; }
    }
  }

  /* Avatar background. */
  .avatar,
  .avatar-circle,
  .avatar-container,
  .breadcrumbs-links .avatar-tile,
  .header-user-avatar {
    radius: var(--avatar) !important;
    border: 1px solid $t !important;
    background-color: transparent !important;
  }
  .avatar-container,
  .identicon {
    color: var(--light);
  }
  // ? Drop some shadow; use transparent avatars for best results.
  img.avatar { filter: drop-shadow(1px 1px 2px $shadow); }
  // ? Replace default background for project avatars and fix the height.
  .avatar:not(img) {
    colors: 0, 0, $shadow;
  }

  // * Project details.
  .project-details {
    .text-plain {
      color: $light;
      &:hover { color: $lighter; }
    }
  }
  .project-stats .nav .stat-link {
    color: $light;
    &:hover { color: $lighter; }
  }
  .user-access-role { colors: $light, $dark, $darker; }

  // * Project :: Empty project.
  .project-empty-note-panel { border-color: $darker; }
  .git-empty pre.bg-light { colors: $light, $darker, $dark; }

  // * Project :: Commits.
  #commits-list {
    .commit-list {
      .commit {
        colors: 0, $darker, 0;
        a { colors: $light, 0, 0; }
        // Commit description.
        .commit-row-description { colors: $light, $accent, $darker; }
      }
    }
    .commit-header {
      radius: $radius;
      border: 1px solid;
      colors: 0, $darker, $dark;
    }
  }
  // Show commit message.
  .text-expander {
    colors: $light, $darker, $darker;
    transition: background 0.2s ease-in-out;
    &.open, &:hover { colors: $light, $darker, $accent; }
  }

  // * Project :: Branches.
  .all-branches {
    .btn.btn-default { colors: $light, 0, 0; }
    .btn.btn-remove { colors: var(--white), $red, $red; }
    .branch-commit .commit-row-message { colors: $light, 0, 0; }
    // Select next sibling and reset the colors.
    & + .card-footer.text-center {
      colors: $light, 0, $t;
      a { colors: $lighter, 0, 0; }
    }
  }
  // Graph color.
  .divergence-graph {
    .graph-separator, .graph-side [class*="bar"] {
      colors: 0, 0, $accent;
    }
  }
  /* Text color. */
  .commit-row-message,
  .branch-commit,
  .content-list li [class*="item"],
  .content-list li [class*="graph"] [class*="count"] {
    color: $light !important;
  }
  .content-list li {
    colors: 0, $darker, 0;
    // TODO Find a better way to style this selector.
    a:not(.btn-warning) { color: $accent !important; }
  }
  .branch-commit {
    .commit-sha, .gfm-commit, .gfm-commit_range { color: $accent !important; }
  }

  // * Project :: Contributors.
  [id*="contributors"] {
    // Prevent the hover.
    &:hover svg { opacity: 1 !important; }
    // Svg styles.
    .person .spark, .tint-box {
      radius: $radius;
      colors: $light, 0, $darker;
      .axis {
        .domain, line { stroke: $lighter; }
        text { fill: $light; }
      }
      // Graph colors.
      .area { fill: $green !important; }
      .area-contributor { fill: $orange !important; }
    }
  }

  // * Project :: Graph.
  .project-network {
    margin-top: 10px;
    overflow: hidden;
    radius: $radius;
    border-color: $darker;
    .controls {
      colors: 0, $darker, $darker;
    }
    // Graph background.
    .network-graph {
      fill: var(--light);
      background-color: var(--dark);
      &:hover > svg {
        opacity: 1 !important;
      }
      // Hover over commit.
      > svg rect[rx*="4"][ry*="4"] {
        stroke: var(--shadow);
        fill: var(--darker);
      }
      // Text color.
      > svg text {
        fill: var(--light);
      }
      // Sidebar.
      > svg rect[width*="40"], > svg rect[width*="30"] {
        stroke-width: 0;
        stroke: var(--darker);
        fill: var(--darker);
      }
    }
  }
  // ? Fix conflicting styles in the navigation.
  [data-page="projects:network:show"] .row-content-block {
    padding: 0;
    border: 0;
  }


  // * Modal.
  .modal {
    .modal-content { colors: 0, 0, $dark; }
    .modal-header { colors: 0, $darker, $dark; }
    .modal-body {
      radius: 0 0 $radius $radius;
      colors: 0, 0, $dark;
      .export-modal-subheader { colors: 0, $darker, 0; }
      // Font color.
      // ? Board scope.
      .title { colors: $lighter, 0, 0; }
      .block + .block { border-top-color: $darker; }
    }
    .modal-footer { colors: 0, $darker, 0; }
  }

  // * Close buttons.
  // ! Blame @RaitaroH for this one.
  .close {
    transition: 200ms ease-in-out;
    text-shadow: 0 1px 0 $shadow;
    color: $icon;
    &:hover, &:focus { color: $accent !important; }
    // Non-modal.
    &:not(:disabled):not(.disabled) .fa {
      text-shadow: 0 1px 0 $shadow;
      transform: translateY(-5px);
      color: $icon !important;
    }
  }

  // * Project :: Blame.
  .file-holder {
    .file-fork-suggestion { colors: 0, $darker, $dark; }
    .table-responsive { radius: 0 !important; }
    .file-blame-legend { colors: 0, $darker, $dark; }
    .file-content.blame {
      tr { border-bottom-color: $darker; }
      td.blame-commit { colors: 0, 0, $dark; }
      td.line-numbers { border-left-color: $darker; }
      td.line-numbers + td.lines > pre.code {
        radius: $radius;
        colors: $lighter, 0, $darker;
      }
    }
  }

  /* Branch info border color. */
  .commit-box,
  .info-well .well-segment:not(:last-of-type) {
    border-color: $darker;
  }
  /* Commit description. */
  .commit-description,
  .commit-row-description {
    color: $light !important;
    border-left-color: $accent !important;
  }
  /* Link. */
  .commit .gfm {
    color: $accent !important;
  }
  /* Deleted branch. */
  .info-well .limit-box {
    background-color: $red !important;
  }
  ul.content-list > li,
  .info-well > .well-segment {
    padding: 8px;
  }
  /* Center avatar. */
  [id*="commit"] a > img,
  .info-well > .well-segment a > img {
    margin-top: 3px;
    margin-left: 3px;
  }
  /* Adjust sha. */
  .commit > .commit-detail,
  .info-well > .well-segment .commit-detail {
    align-items: center;
  }

  // * GPG button.
  .gpg-status-box {
    &.valid { colors: $green, $green, $dark; }
    &.invalid, &.invalid:focus { colors: $light, $darker, $dark; }
  }

  // * Popover.
  .popover {
    colors: 0, $darker, $dark;
    box-shadow: $box;
    &-header { colors: 0, $darker, $darker; }
    &-body { colors: $light, 0, 0; }
    .arrow::before { border-top-color: $darker !important; }
    .arrow::after { border-top-color: $dark !important; }
    .gpg-popover-user-link { colors: $light, 0, 0; }
    // Milestones.
    .milestone-popover-body { colors: 0, 0, $t; }
    .milestone-popover-footer { colors: 0, $darker, 0; }
  }

  /* Recently pushed branches. */
  .container-fluid > .row-content-block.white {
    margin-top: 10px;
    padding: 12px 8px;
    radius: $radius;
    border: 1px solid $darker;
    background-color: $dark;
  }

  // * Commits :: Diff summary.
  .diff-files-changed {
    radius: $radius;
    padding: 2px;
    margin: 10px 0;
    border: 1px solid;
    colors: 0, $darker, $dark;
    // Wrapper.
    > .files-changed-inner {
      display: flex;
      flex-flow: row-reverse wrap;
      // Center buttons vertically.
      .inline-parallel-buttons {
        float: none;
        padding: 3px 5px 5px 5px;
        // Hide buttons on small resolution.
        @media (max-width: 885px) { display: none !important; }
      }
      // ? "Showing x changed..."
      // TODO: Remove if/when they fix it.
      .commit-stat-summary {
        margin: auto auto auto 0;
        padding: 0 8px;
        colors: 0, 0, $t;
      }
    }
  }

  // * Diff file.
  .diff-file {
    radius: $radius;
    // Header.
    [class*="file-title"]  {
      padding: 8px;
      transition: 0.2s background ease-in-out;
      colors: 0, $darker, 0;
      &:hover { colors: 0, 0, $darker; }
    }
    // Collapsed file content.
    .diff-content {
      colors: $light, 0, $dark;
      .btn-link { colors: 0, $t, 0; }
    }
  }

  // Image background.
  // TODO refactor with other file-holder related elements.
  .diff-content .file-container,
  .file-holder .file-content.image_file,
  .file_holder .file-content.video,
  .file-holder .file-content.blob-no-preview {
    background-color: $dark;
  }

  // * Diff :: Image.
  // ? vednoc/dark-gitlab/commit/x (image)
  .diff-file {
    // Background image.
    .image {
      colors: 0, 0, $dark;
      // Image frame.
      .frame {
        colors: 0, 0, $darker;
        // Broken image.
        img {
          background: none;
          colors: $light, $dark, 0;
        }
      }
      // Added/removed images.
      .frame {
        &.deleted { colors: 0, $red, 0; }
        &.added { colors: 0, $green, 0; }
      }
    }
    // Modes.
    .view-modes {
      colors: 0, 0, $dark;
      ul li {
        colors: $light, $darker, 0;
        &.active { colors: $accent, 0, 0; }
      }
    }
  }
  // * Add note.
  // TODO move to a more appropriate place.
  .note-container {
    colors: 0, $darker, $dark;
    // Reply background.
    .new-note, .discussion-notes {
      colors: 0, $darker, 0;
    }
  }
  // Show/hide replies.
  .replies-toggle {
    colors: $lighter, $darker, $dark;
    &:hover span { colors: $light, 0, 0; }
  }
  /* Text color. */
  .branch-info > span,
  .file-title-flex-parent a {
    color: $light !important;
  }
  /* Badge. */
  .info-well .badge.badge-gray {
    color: $light;
    border: 1px solid $darker;
    background-color: $dark;
  }
  // TODO move to the global styles.
  .badge.badge-gray, .label.badge-gray { colors: 0, 0, $darker; }


  // * Timeline content.
  .timeline-entry {
    colors: $light, $darker, $t;
    &.outlined { colors: 0, 0, $dark; }
    // Entry borders.
    .timeline-entry-inner { colors: 0, $darker, 0; }
    // Highlighted entry.
    &:target, &.target { colors: 0, $darker, $darker; }
    // Fix button background.
    .note-action-button { colors: 0, 0, $t; }
    // Background.
  }

  // * Note.
  .note {
    // Profile links.
    .note-headline-light { colors: $lighter, 0, 0; }
  }
  .discussion-header { colors: 0, $darker, 0; }
  /* Text color. */
  .discussion-headline-light,
  .note-headline-meta .system-note-separator {
    color: var(--light);
  }
  // * Notes.
  // #notes {
  //   radius: $radius;
  //   border: 1px solid;
  //   colors: 0, $darker, 0;
  // }
  .notes {
    // Text color.
    // ? Be super-specific because they're using !important on upstream. :p
    > li .note-body div.note-text blockquote p,
    > li .note-body div.note-text .blockquote p {
      colors: $light, 0, 0;
    }
    a, a:hover { color: $accent !important; }
  }

  // * Issues :: Conversation notes.
  [id^="notes"] {
    // ? Note background, avoid system notes and forms.
    .notes.timeline > .timeline-entry:not(.system-note):not(.note-form) {
      border-radius: $radius;
      background-color: $dark !important;
    }
    // Icon.
    .system-note .timeline-icon {
      border: 1px solid $darker;
      background-color: $dark;
    }
    // ? Issue description.
    .detail-page-description > script + div {
      padding: 8px;
      border-radius: $radius;
      border: 1px solid $darker;
      background-color: $dark;
    }
  }
  // The line connector.
  .main-notes-list::before { border-left: 1px solid $darker; }

  // * Issues :: New note.
  .common-note-form .md-area {
    radius: $radius;
    colors: 0, $darker, $dark;
    &.is-focused { box-shadow: 0 0 0px 2px $shadow !important; }
    // Input area.
    .markdown-area { colors: $light, $darker, $dark; }
    // Navigation.
    // ? New design; find old styles and bring them here for backwards compatability.
    .nav-links:not(.quick-links) {
      colors: 0, $darker, 0;
      li:not(.md-header-toolbar) {
        button { colors: $lighter, 0, 0; }
        &.active button { colors: $light, $accent, 0; }
      }
    }
  }
  /* Toolbar colors. */
  .edited-text,
  .comment-toolbar {
    color: $light;
    border-color: $darker !important;
  }

  // * Markdown selectors.
  .md {
    colors: $light, $dark, 0;
    a { colors: $accent, 0, 0; }
    h1, h2 { colors: 0, $darker, 0; }
    hr, pre { colors: 0, $darker, 0; }
    blockquote { colors: 0, $accent, $darker; }
    table {
      radius: $radius;
      color: $lighter;
      tbody { background-color: $t; }
      tr th { colors: $light, $darker, $darker; }
      tr td { colors: 0, $darker, 0; }
    }
    img:not(.emoji) {
      radius: $radius;
      colors: 0, $darker, $dark;
    }
  }
  /* Attach a file. */
  .markdown-selector { color: $accent; }
  /* Fullscreen (zen) mode. */
  .zen-backdrop.fullscreen {
    colors: 0, 0, $darker;
    textarea {
      margin-top: 5px;
      radius: $radius;
      colors: $light, 0, $dark;
    }
  }


  // * Left sidebar.
  .nav-sidebar {
    colors: 0, 0, $dark;
    box-shadow: 1px 0px 0px 0px $darker;
    // Hide scrollbar.
    ::-webkit-scrollbar { display: none !important; }
    // Links.
    li a, .context-header > a {
      colors: $light, 0, 0;
      &:hover, &:focus { colors: 0, 0, $darker; }
    }
  }

  // * Sidebar sub-menu.
  .nav-sidebar .sidebar-top-level-items li {
    // Active links.
    // ? Specify the :not(...) in order to prevent first link being active.
    &.active:not(.fly-out-top-item) {
      box-shadow: inset 4px 0 0 $darker !important;
      background-color: $dark !important;
      > a { colors: $accent, $dark, $darker; }
      // Icon color.
      svg { fill: $accent !important; }
    }
    // Non-active items.
    a {
      margin-right: 0;
      transition: background 0.1s ease-in-out;
    }
    .divider { background: $shadow !important; }
  }

  // * Active tab.
  .nav-sidebar .sidebar-sub-level-items {
    // Active tab.
    .active:not(.fly-out-top-item) a {
      box-shadow: inset 4px 0 0 0 var(--accent) !important;
      background-color: $darker !important;
    }
  }
  // Issue counter.
  .sidebar-top-level-items {
    .badge.badge-pill { colors: $light, 0, $darker; }
    .active .badge.badge-pill, li:hover .badge.badge-pill { colors: $light, 0, $dark; }
  }

  // * Collapse button.
  .nav-sidebar .toggle-sidebar-button {
    height: 44px;
    width: 100%;
    transition: 0.2s ease-in-out !important;
    colors: $light, $darker, $dark;
    &:hover { colors: 0, 0, $darker; }
    // Text color.
    .collapse-text { colors: $light, 0, 0; }
  }

  /* Dropdown. */
  .is-showing-fly-out .sidebar-sub-level-items {
    box-shadow: 2px 1px 3px $shadow !important;
    radius: 0 $radius $radius 0 !important;
    colors: 0, $darker, $dark;
  }
  /* Toggle button. */
  .close-nav-button { colors: $light, $darker, $dark; }


  // * Right sidebar.
  .right-sidebar {
    colors: 0, $darker, $dark;
    // Separators.
    .block, .gutter-toggle { colors: 0, $darker, 0; }
    // Progress in milestones.
    .progress { colors: 0, 0, $darker; }
    // Text color.
    .no-value, .sidebar-collapsed-icon { colors: $light, 0, 0; }
    .title {
      colors: $lighter, 0, 0;
      // Edit buttons.
      > a, > button { colors: $lighter, 0, 0; }
    }
    // Button background.
    .js-move-issue:hover,
    &.right-sidebar-collapsed .block:hover {
      colors: 0, 0, $darker;
    }
  }

  // * Project :: Wiki.
  [data-page*="wikis:show"] #content-body {
    // Wiki sidebar.
    .right-sidebar.wiki-sidebar {
      a { color: $light; }
      a:hover { color: $accent; }
      .active > a { color: $accent; }
    }
    // Text colors.
    .wiki-last-edit-by {
      colors: $lighter, 0, 0;
      > strong { colors: $light, 0, 0; }
    }
  }

  // * Project :: Project/group home panel.
  .project-home-panel,
  .group-home-panel {
    margin-top: 8px;
    colors: 0, $darker, 0;
    // Shorten description.
    .project-description { max-width: 60em; }
    // Text color.
    .text-secondary, .count { colors: $light, 0, 0; }
    // Buttons.
    .btn, input { colors: 0, $darker, $dark; }
    .count-badge-count { colors: 0, $darker, $dark; }
    .count-badge-button { colors: $light, $darker, $darker; }
    // Remove button backgrounds.
    .js-read-more-trigger { colors: $accent, 0, $t; }
    // Metadata text color.
    .project-metadata * {
      colors: $lighter, 0, 0;
      // Reset license button.
      &.project-license .btn {
        transform: translate(0) !important;
        background: 0 !important;
      }
    }
    // ? New design, December 2018.
    .add-license-link { colors: $lighter, 0, 0; }
    .project-stat-value { colors: $light, 0, 0; }
    .project-stats .stat-text { colors: $lighter, 0, 0; }
    .project-repo-buttons {
      .count-badge, .btn-xs { height: 34px !important; }
    }
  }

  // * Arrows.
  // ? Old GitLab design.
  .count-with-arrow {
    .count { colors: 0, $darker, $dark; }
    .arrow::before { border-right-color: $darker !important; }
    .arrow::after { border-right-color: $dark !important; }
  }
  // * Remove unnecessary whitespace.
  .project-home-panel {
    padding: 0;
    // Badges.
    .prepend-top-default { margin: 10px 0 10px 0 !important; }
    // Project description.
    .project-home-desc, .project-description > div > p { margin: 0 0 10px 0 !important; }
    // Buttons under badges.
    .project-repo-buttons {
      // Reset margins on all items.
      > div { margin: 0; }
      // Apply margins on the child elements.
      // ? Inline is needed for specificity.
      > div > div:not(:last-child), > div > .inline { margin: 0 8px 8px 0 !important; }
      // Right margin for buttons.
      .project-action-button { margin: 0 !important; }
    }
  }
  // * Separator.
  .project-stats {
    border-bottom: none;
    colors: 0, $darker, 0;
    // ? Reset background-color on project page.
    .progress { colors: 0, 0, $t; }
  }
  // Language bar.
  .repository-languages-bar {
    background-color: transparent;
    .progress-bar {
      margin: 0 4px 0 0;
      radius: 8px;
      &[style$="#776791"] { background: #000000 !important; }
    }
  }

  // * Project :: Settings.
  .settings {
    border-bottom-color: $darker;
    .sub-section {
      radius: $radius;
      colors: 0, $darker, $dark;
    }
    .bs-callout-info {
      colors: $lighter, $darker, $dark;
      border-left-color: $accent !important;
    }
    .project-visibility-setting {
      radius: $radius $radius 0 0;
      colors: $light, $darker, $dark;
    }
    .project-feature-settings {
      radius: 0 0 $radius $radius;
      colors: 0, $darker, $dark;
    }
    // Protected tag card.
    .protected-tags-list > .card-header { colors: $light, $darker, $darker; }
    // Tables.
    table {
      border-collapse: separate !important;
      colors: 0, $t, 0;
      // Remove double-borders.
      tbody tr td:not(:last-child) { border-right: none !important; }
      // Overengineered round corners. xd
      thead tr th:first-child { border-radius: $radius 0 0 0 !important; }
      thead tr th:last-child { border-radius: 0 $radius 0 0 !important; }
      tbody tr td:last-child { border-radius: 0 0 $radius 0 !important; }
      tbody tr td:first-child { border-radius: 0 0 0 $radius !important; }
    }
  }
  // ? Service Desk -> Forward...
  #js-service-desk .card-header {
    radius: $radius;
    colors: $orange, $darker, $darker;
    h3 {
      margin: 0.75rem 0;
      font-size: 1.0rem;
    }
  }

  /* Latest commit message.. */
  .info-well {
    margin-bottom: 0;
    radius: $radius;
    colors: $light, $darker, $dark;
    a { color: $lighter; }
  }

  /* Commit button. */
  .commit-sha-group .label,
  .commit-sha-group .btn {
    color: $light;
    border-color: $darker;
    background-color: $dark;
  }
  /* Fix background in upload files. */
  .commit-message-container { background: none; }
  /* Dropzone! */
  .blob-upload-dropzone-previews { border-color: $darker; }

  // * Project :: Badges.
  .project-badge { transition: 0.2s opacity ease-in-out; }
  [src*="for-the-badge"] { radius: $radius; }
  span.badge {
    // Apply everywhere except on color-label elements.
    &:not(.color-label) { colors: var(--white), 0, 0; }
    // Apply everywhere except on badge-pill elements.
    &:not(.badge-pill) {
      opacity: 0.6;
      transition: 0.2s opacity ease-in-out;
      &:hover { opacity: 1; }
    }
  }

   // * Project :: Readme.
  .file-holder {
    radius: $radius !important;
    colors: 0, $darker, $dark;
    // Corners for child elements.
    .file-title {
      radius: $radius $radius 0 0;
      box-shadow: 0 0 0 1px $darker; // ? Escape empty space between borders.
    }
    .blob-viewer > .file-content { radius: 0 0 $radius $radius; }
    // ? File title in artifacts.
    .file-title-flex-parent { radius: $radius $radius 0 0; }
  }
  // Header.
  .tree-holder .file-title a:not(.btn) { color: $light; }
  /* Readme preview. */
  .file-holder .file-title-flex-parent,
  .file-holder .file-content {
    border-color: $darker;
    background: $dark;
  }
  // File search header.
  .tree-holder .tree-table .selected td { colors: $light, $darker, $dark; }

  // * Wiki.
  .wiki:not(.use-csslab) {
    color: $light;
    a { color: $accent !important; }
    h1, h2 { colors: $lighter, $darker, 0; }
    > p > code { border: 1px solid $darker !important; }
    blockquote, .blockquote {
      colors: $light, $accent, $darker;
      // Second rule solves blockquote weirdness in issues.
      p, * > p { colors: $light, 0, 0; }
    }
    pre { radius: $radius; }
    pre, code { colors: $lighter, $darker, $dark; }
    img:not(.emoji) {
      radius: $radius;
      colors: 0, $darker, $dark;
    }
    kbd {
      colors: $accent, $dark, $shadow;
      box-shadow: none;
    }
    table {
      colors: $light, 0, $dark;
      tr th { colors: $light, $darker, $darker; }
      th, tr td { border-color: $darker; }
    }
  }

  // * Project :: Files.
  .table-holder {
    radius: $radius;
    border: 1px solid $darker;
    background-color: $dark;
    // Remove unnecessary borders.
    .tree-table tr {
      border-color: transparent !important;
      td {
        border-color: $darker !important;
        transition: 0.2s ease;
      }
      // Top border for file table.
      th { border-top-color: $darker; }
    }
    // Text color.
    .tree-item {
      .tree-time-ago,
      .tree-commit-link,
      &-file-name i, &-file-name a {
        color: $light !important;
      }
    }
  }
  // File/table headers.
  // TODO refactor.
  table.table tr th,
  .file-holder .file-title,
  .tree-holder .tree-table tr:hover:not(.tree-truncated-warning) td {
    border-color: var(--darker);
    background-color: var(--darker);
  }


  // * User profile.
  .cover-block {
    colors: 0, $darker, $dark;
  }
  // Groups section.
  [data-page="users:show"] #groups {
    .content-list {
      margin-top: 10px;
      border: 1px solid;
      radius: $radius;
      colors: 0, $darker, $dark;
      li {
        transitions: all 0.15s ease-in-out;
        &:hover { colors: 0, 0, $darker; }
      }
      .group-row .stats { color: $lighter; }
    }
  }
  // Text dividers.
  .middle-dot-divider::after { color: $lighter; }
  /* Fix master/history/find file/web ide section when low-resolution. */
  @media (max-width: 740px) {
    .nav-block {
      flex-direction: column;
    }
  }
  // ? Scrolling tabs.
  // body:not([data-page$="users:show"])
  .scrolling-tabs-container {
    margin: 10px 0;
    padding: 0 10px;
    /* overflow: hidden; */
    radius: $radius;
    border: 1px solid $darker;
    background-color: $dark;
    .fade-right { background: linear-gradient(to left, $dark 45%, $t); }
    .fade-left { background: linear-gradient(to right, $dark 45%, $t); }
  }

  // * User profile :: Activity.
  #activity > .row-content-block {
    colors: 0, $darker, $dark;
    // Prevent SVG from fading.
    svg:hover { opacity: 1 !important; }
    // Text color.
    svg text { fill: $light; }
  }
  // Reset navigation.
  .user-profile .scrolling-tabs-container {
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    background-color: transparent !important;
  }
  // * Contributions.
  // ? Use accent color for contributions.
  svg.contrib-calendar > g {
    text { fill: $light; }
    rect { fill: $accent; }
    rect[fill="#ededed"] { opacity: 0.075; }
    rect[fill^="rgb(17"] { opacity: 0.25; }
    rect[fill^="rgb(12"] { opacity: 0.475; }
    rect[fill^="rgb(82"] { opacity: 0.75; }
    rect[fill^="rgb(37"] { opacity: 1; }
  }

  /* Most recent activity. */
  #activity .event-item {
    color: var(--light);
    border-bottom-color: var(--darker);
  }
  /* Text color. */
  .cover-block .cover-desc,
  .nothing-here-block,
  .calendar-hint,
  .content-list li {
    color: var(--light) !important;
  }
  .nothing-here-block { padding: 0px; }
  /* Emphasized text color. */
  .cover-block .cover-title {
    color: var(--lighter) !important;
  }
  /* Icons. */
  [class*="pushed-"] svg {
    fill: var(--icon) !important;
  }

  // * Project :: Activity.
  // ? https://gitlab.com/vednoc/dark-gitlab/activity
  .project-activity {
    radius: $radius;
    border: 1px solid $darker;
    background-color: $dark;
    // Item.
    .event-item {
      padding: 8px 8px 8px 60px;
      colors: $light, $darker, 0;
      transition: background 0.15s ease-in-out;
      &:hover { background-color: $darker; }
      // Text color.
      a { color: $accent; }
      .event-title { color: $light; }
      .author_name a, strong a { color: $accent; }
      // Remove left padding on small resolution.
      @media (max-width: 575px) { padding-left: 8px; }
      // Avatar position.
      .user-avatar { margin-left: 8px; }
    }
  }

  // * Profile :: Overview.
  .user-profile {
    // Sections.
    [class*="col"] > [class*="block"] {
      padding: 8px 16px;
      margin-top: 2rem;
      border: 1px solid;
      radius: $radius;
      colors: 0, $darker, $dark;
      // Remove padding for titles.
      > [class*="block"] {
        padding: 0;
        colors: 0, $darker, 0;
        // Hide border in "activity" section.
        &:first-child {
          colors: 0, $t, 0;
        }
      }
      // Force calendar to stay full opacity.
      .contrib-calendar:hover { opacity: 1 !important; }
      // ? Fixes border separator with !important rule on it.
      .border-bottom { colors: 0, $darker, 0; }
    }
    // Event items.
    // TODO possible refactor with styles beneath.
    .event-item {
      border-color: $darker;
      .event-title {
        color: $lighter;
        a { color: $accent; }
      }
      // ? New design in recent contributions.
      .event-user-info {
        colors: $lighter, 0, 0;
        .author_name a { colors: $light, 0, 0; }
      }
      .commit-sha { colors: $light, 0, 0; }
      // Body text color.
      .event-body { colors: $light, 0, 0; }
    }
  }

  // * Profile :: Activity
  // TODO possible refactor with project::activity.
  .user-profile .content_list {
    radius: $radius;
    border: 1px solid $darker;
    background-color: $dark;
    .event-item {
      padding: 8px 8px 8px 60px;
      border-color: $darker;
      transition: background 0.15s ease-in-out;
      &:hover { background-color: $darker; }
      // Remove left padding on small resolution.
      @media (max-width: 575px) { padding-left: 8px; }
      // Adjust icon position.
      .system-note-image {
        left: 8px;
        top: 8px;
        padding: 8px;
      }
      // Move avatar off the edge.
      .user-avatar { margin-left: 8px; }
      .event-title { color: $light; }
      .event-body, &-timestamp { color: $lighter; }
      a, .commit-sha { color: $accent; }
      .commit-sha { font-family: var(--code-font); }
    }
  }

  // * Project :: Cycle Analytics.
  #cycle-analytics {
    // Introduction.
    .landing { colors: 0, $darker, $dark; }
    // Colors.
    .stage-nav {
      .stage-nav-item {
        colors: $light, $darker, $dark;
        &.active {
          colors: 0, $dark, $dark;
          box-shadow: inset 2px 0 0 0 $accent;
        }
        // Median.
        .stage-empty, .not-available { color: $lighter; }
      }
    }
    // Related issues.
    .stage-event-item {
      colors: $lighter, $darker, 0;
      .issue-link, .issue-date, .build-date { colors: $lighter, 0, 0; }
      .item-title a { colors: $light, 0, 0; }
    }
  }

  /* Dashboard. */
  .row-content-block {
    margin-top: 10px !important;
    padding: 8px;
    radius: $radius;
    border: 1px solid $darker;
    color: $light;
    background-color: $dark;
  }
  /* Sub-header found in compare branches. */
  .sub-header-block {
    border-color: $darker;
    background-color: transparent;
  }
  /* There isn't anything to compare. */
  .card.bg-light {
    border: 1px solid var(--darker) !important;
    background-color: var(--dark) !important;
  }
  [class*="card"] > ul > li {
    transition: 200ms ease-in-out;
  }
  /* Text color. */
  .issuable-milestone,
  .issuable-info,
  .task-status,
  .issuable-updated-at {
    color: var(--light) !important;
  }
  /* Email button. */
  .issuable-email-modal-btn {
    color: var(--accent);
  }
  /* Merged/closed. */
  .merge-request.merged,
  .issue.merged,
  .merge-request.closed,
  .issue.closed {
    border-color: var(--darker);
    background-color: var(--dark);
  }
  /* New issues. */
  .issue.today {
    border-color: var(--darker);
    background-color: var(--shadow);
  }
  // Items on hover.
  .card > ul > li {
    &:hover, &.done-reversible {
      colors: 0, 0, $darker;
    }
    .btn {
      colors: 0, 0, $dark;
    }
  }


  // * Dashboard :: Activity.
  .nav-block.activities {
    border-bottom: none;
    // ? Solves the conflicting styles.
    .scrolling-tabs-container {
      padding: 0;
      border: none;
      border-bottom: 1px solid var(--darker);
      .fade-right { right: 1px; }
    }
  }
  // * List.
  .activities {
    // Fix RSS icon.
    .controls { margin: 20px 10px 0 10px; }
    // List.
    // ! Might need extra tweaking somewhere.
    .content_list {
      radius: $radius;
      colors: 0, 0, $dark;
      box-shadow: inset 0 0 0 1px $darker;
    }
    // Items.
    .event-item {
      padding: 8px 16px 8px 60px;
      colors: $light, $darker, 0;
      .event-title { color: $light; }
      a { color: $accent; }
      // Adjust avatars.
      .user-avatar { margin-left: 10px; }
    }
  }

  // * Dashboard :: Operations.
  .tokenized-input-wrapper {
    &.focus { box-shadow: 0 0 4px 0px $accent !important; }
    .tokenized-input { colors: $light, 0, $t; }
    .input-token, .tokenized-input-token-remove { colors: 0, 0, $darker; }
  }

  // * Dashboard :: Top navigation.
  .top-area:not(.cover-block) {
    margin-top: 10px;
    padding: 0 8px;
    radius: $radius;
    border: 1px solid;
    colors: 0, $darker, $dark;
    // Remove overflow so the button animation can be seen properly.
    .project-item-select-holder.btn-group { overflow: visible; }
  }

  // * Dashboard :: Issues/MR page.
  [class$="-filters"] + .card {
    colors: 0, $t, $t;
    // List.
    .issuable-list {
      margin-top: 10px !important;
      radius: $radius;
      border: 1px solid;
      colors: 0, $darker, $dark;
      // Round corners.
      li {
        &:first-child { border-radius: $radius $radius 0 0; }
        &:last-child { border-radius: 0 0 $radius $radius; }
      }
      // Remove right padding on issues/merge requests page.
      .issuable-info-container { padding-right: 0; }
    }
  }

  // * Dashboard :: Todos page.
  .js-todos-all .card {
    margin-top: 10px;
    radius: $radius;
    colors: 0, 0, $t;
    // List wrapper.
    .todos-list {
      radius: $radius;
      border: 1px solid;
      colors: 0, $darker, $dark;
      // List items.
      .todo {
        border: none;
        // Reset borders and round corners.
        &:not(:first-child) { border-top: 1px solid $darker; }
        &:first-child { border-radius: $radius $radius 0 0; }
        &:last-child { border-radius: 0 0 $radius $radius; }
      }
    }
  }

  // * Issues :: List.
  .issues-holder {
    margin-top: 10px;
    radius: $radius;
    border: 1px solid $darker;
    background-color: $dark;
    // Email a new issue to this project.
    .issuable-footer {
      padding: 10px;
      border-top: 1px solid $darker;
    }
    li {
      transition: background 0.15s ease-in-out;
      &:first-child { radius: $radius $radius 0 0; }
      &:hover { background-color: $darker; }
    }
  }

  // * Issues :: Search or filter results.
  .filtered-search-box {
    &.focus { box-shadow: 0 0 4px 0 $darker; }
    colors: 0, $darker, $dark;
    // Search field.
    .form-control { colors: $light, $t, 0; }
    // Search field words.
    .name { color: $light; }
    // Search field button.
    .clear-search { colors: 0, 0, $dark; }
    // Search tokens (labels).
    .filtered-search-token > .name,
    .selectable > div {
      colors: $light, $red, $darker;
    }
  }

  // * Issues :: Details.
  .detail-page-header,
  .issuable-details .content-block {
    color: var(--light);
    border-color: var(--darker);
  }
  // Time tracking.
  .time_tracker .time-tracking-help-state {
    border-color: var(--darker);
    background-color: var(--dark);
  }
  // Edited.
  // ? Contains styles for milestone elements; find a better place.
  .detail-page-description {
    .title, &.milestone-detail { colors: $light, $darker, 0; }
    .edited-text, .edited-text * { colors: $lighter, 0, 0; }
  }

  // * Issues :: Related issues.
  .related-issues-block {
    // Number of issues.
    .issue-count-badge { colors: 0, $dark, 0; }
    // Issue metadata.
    .item-body {
      // Link to the issue.
      a.sortable-link { colors: $light, 0, 0; }
      // Milestone/weight/etc.
      .item-weight span, .path-id-text { colors: $lighter, 0, 0; }
    }
  }

  /* Created branch button. */
  .issuable-details p > code,
  a.gfm-project_member {
    border: 1px solid;
    colors: $light, $darker, $dark;
  }
  // Current user (you).
  .gfm.current-user {
    colors: $light, $accent, $accent;
    &:hover {
      color: $light !important;
    }
  }
  // Notes.
  .note-text pre {
    radius: $radius !important;
  }
  // ? Fixes missing bottom border for code.
  .notes .note-text > p:last-child { padding-bottom: 1px !important; }

  // * Cards.
  .card, .card-slim {
    // overflow: hidden;
    colors: 0, $darker, $dark;
    .card-header,
    .card-footer {
      font-weight: 600 !important;
      colors: 0, $darker, $darker;
    }
    .card-body {
      pre {
        font-family: var(--code-font);
        radius: $radius;
        colors: $light, $darker, $dark;
      }
    }
  }

  // * Emoji picker.
  .emoji-menu {
    radius: $radius;
    colors: 0, $darker, $dark;
  }
  // * Emoji autocomplete.
  .atwho-view {
    colors: $light, $darker, $dark;
    box-shadow: $box;
    .atwho-view-ul {
      // Matching text.
      li strong { colors: $lighter, 0, 0; }
      // Selected.
      li:hover, li.cur { colors: $lighter, 0, $darker; }
    }
  }


  // * Issues :: Boards.
  .issue-boards-content {
    // Fullscreen.
    &.is-focused {
      colors: 0, 0, $dark;
    }
    // Reset top nav.
    .row-content-block { margin: 0 16px; }
    // Board colors.
    .board-inner {
      colors: 0, $darker, $dark;
      // Board header.
      .board-title { colors: $light, $darker, 0; }
      // Empty, default boards.
      [class$="-state"] { colors: $light, 0, $dark; }
      // Showing all issues.
      .board-list-count,
      .board-title-sub-text {
        colors: $lighter, 0, 0;
      }
    }
  }

  // * Board cards.
  // ? They turn into a tooltip once dragged so we must style them here.
  .board-card {
    transition: background 0.2s ease-in-out;
    border: 1px solid;
    colors: 0, $darker, $dark;
    box-shadow: 0px 1px 2px 0px $shadow;
    &:hover {
      colors: 0, $darker, $darker;
      box-shadow: 0px 2px 3px 2px $shadow;
    }
    // Text color.
    .board-card-title a { color: $light; }
    .board-card-number { color: $lighter; }
    // Assignee background.
    .board-card-assignee:hover a { colors: 0, 0, $t; }
  }
  // ? When you move boards themselves.
  .board > .board-inner {
    colors: 0, $darker, $dark;
    .board-title { border-bottom-color: $darker; }
  }


  // * Issues :: Labels.
  .labels-container {
    radius: $radius;
    border: 1px solid;
    colors: 0, $darker, $dark;
    // List.
    .manage-labels-list > li:not(.empty-message):not(.is-not-draggable) {
      radius: $radius;
      colors: 0, $darker, $dark;
      transition: background 0.2s ease-in-out;
      &:hover { colors: 0, $darker, $darker; }
    }
    .label-badge-gray {
      border: 1px solid;
      colors: $light, $darker, $dark;
    }
    .label-badge-blue, .badge-info {
      border: 1px solid;
      colors: $light, $blue, $dark;
    }
  }


  // * Issues :: Milestones.
  .milestones {
    padding: 0;
    colors: 0, 0, $t;
    // Items.
    .milestone, .status-box {
      border: 1px solid !important;
      colors: $light, $darker, $dark;
      // Text color.
      .milestone-range { colors: $light, 0, 0; }
      // Links.
      .milestone-progress {
        .light, a { colors: $lighter, 0, 0; }
      }
      // Title and reopen button.
      strong a, .btn-reopen { colors: $light, 0, 0; }
    }
  }
  .milestone {
    // Color in relatable issues.
    &-title { colors: $lighter, 0, 0; }
    &-banner-link { padding: 2px !important; }
  }

  // Progress bar background.
  .progress {
    colors: 0, 0, $darker;
    // Filled progress.
    .bg-success { colors: $light, 0, $green; }
  }

  // Details.
  .issuable-row {
    colors: 0, 0, $t;
    .issuable-number { colors: $lighter, 0, 0; }
  }

  /* Create milestone footer. */
  .form-actions,
  hr {
    border-top-color: var(--darker);
    background-color: var(--dark);
  }
  .form-actions {
    padding: 8px;
    border-radius: 4px;
    border: 1px solid;
    colors: 0, $darker, 0;
  }

  // * Promotional.
  .user-callout.promotion-callout .bordered-box {
    border-color: var(--darker);
    background-color: var(--dark);
  }
  .banner-non-empty-state {
    padding: 5px 0 0 0;
    border: 1px solid;
    radius: $radius;
    colors: 0, $darker, $dark;
  }

  // * Project :: Chart.
  // TODO unfinished.
  .burndown-chart {
    background-color: $darker;
    text { fill: $light; }
    .axis {
      &-label text { colors: $red, 0, 0; }
      &-label line, line, path { stroke: $lighter; }
    }
    // ? Legend!
    .legend {
      rect { stroke: $lighter; }
      text { fill: $light; }
    }
    .actual.line {
      stroke: $accent;
      fill: none !important;
    }
  }
  // Repository charts.
  .repo-charts {
    // Brings back the language color.
    .fa { color: inherit !important; }
    canvas { colors: 0, 0, $dark; }
  }

  // * Calendar.
  .pika-single {
    colors: $light, $darker, $dark;
    // Header.
    .pika-label { colors: $lighter, 0, $t; }
    // Cells.
    td {
      colors: 0, $darker, 0;
      .pika-day { colors: $light, 0, $dark; }
      // Active.
      .pika-day:hover,
      &.is-today .pika-day,
      &.is-selected .pika-day { colors: $lighter, 0, $darker; }
    }
  }

  // * Pagination.
  .page-item {
    .page-link {
      colors: $light, $darker, $dark;
    }
    // Selected.
    &.active .page-link,
    .page-link:hover {
      colors: $light, $accent, $accent;
    }
    // Disabled.
    &.disabled .page-link {
      colors: $lighter, $darker, $darker;
      opacity: 0.6;
    }
  }


  // * Merge Requests :: List.
  .merge-requests-holder {
    margin-top: 10px;
    radius: $radius;
    border: 1px solid var(--darker);
    background-color: var(--dark);
    li {
      transition: background 0.15s ease-in-out;
      &:hover {
        background-color: var(--darker);
      }
    }
    // Email a new MR.
    .issuable-footer {
      padding: 10px;
      border-top: 1px solid var(--darker);
    }
  }

  // * Merge Requests :: Details.
  .merge-request-tabs-holder {
    margin: 10px 0;
    padding: 0 8px;
    border: 1px solid;
    radius: $radius;
    colors: 0, $darker, $dark;
    .scrolling-tabs-container {
      margin: 0;
      padding: 0;
      radius: 0;
      border: 0;
    }
  }
  /* Nav background. */
  .limit-container-width .merge-request-tabs-container .inner-page-scroll-tabs {
    background-color: transparent;
  }
  .nav-tabs .nav-link.active {
    background-color: transparent !important;
  }
  // * Navigation :: Links.
  .nav-links {
    li a.active, .active a { colors: $light, $accent, 0; }
  }
  /* Resolved. */
  .line-resolve-all {
    border-color: var(--darker);
    background-color: var(--dark);
  }


  /* Merge Requests :: Notes. */
  .discussion-body .notes .note,
  .diff-file .notes .note {
    border-bottom-color: var(--darker);
  }
  /* Reply. */
  .discussion-form {
    background-color: transparent !important;
  }
  // ? Discussion within diff section.
  .diffs {
    .notes {
      border-top: none !important;
      &::before { border-left: 1px solid $darker !important; }
    }
    .note.timeline-entry {
      colors: 0, 0, $dark;
    }
  }
  // TODO merge with other discussion styles.
  .discussion-body .discussion-reply-holder,
  .diff-file .discussion-reply-holder {
    radius: 0 !important;
    border-top-color: $darker;
    border-bottom: 1px solid $darker;
    background-color: var(--dark);
  }
  // ? If reply is the last child, apply rounded corners and hide bottom color.
  .discussion-notes > .discussion-reply-holder:last-child {
    radius: 0 0 $radius $radius !important;
    colors: 0, $t, 0;
  }
  // Comments disabled.
  .disabled-comment {
    margin-top: 10px;
    padding: 15px 0;
    colors: $light, $darker, $dark;
    a { color: $accent; }
  }
  /* Text color. */
  .timeline .system-note .note-text,
  .notes .note-body .note-text {
    color: var(--light) !important;
  }
  .notes .system-note .system-note-commit-list-toggler {
    color: var(--accent) !important;
  }
  /* Table. */
  .notes .note-body .note-text table,
  .notes .note-body .note-text table {
    color: var(--light) !important;
    border-color: var(--darker) !important;
  }
  .notes .note-body .note-text table tr th {
    border: 1px solid var(--darker) !important;
    background-color: var(--dark) !important;
  }
  .notes .note-body .note-text table tr td {
    border-color: var(--darker) !important;
  }
  /* Commit list. */
  .notes .system-note .note-body .note-text:not(.hide-shade)::after {
    background: linear-gradient(transparent -100px, var(--dark) 100%) !important;
  }


  // * Merge Requests :: Discussions in file diff.
  .diff-file .notes_holder {
    colors: $red, $green, $blue;
    // TODO might not need this line anymore.
    .notes_line {
      colors: $light, $dark, $dark;
      border-right-color: $darker !important;
    }
    .notes_content {
      colors: $light, $dark, $dark;
      // Discussion.
      .notes {
        border-top: 1px solid;
        colors: 0, $darker, $dark;
      }
      // Add missing borders to parallel views.
      &.parallel.new {
        border: 1px solid $darker !important;
        border-right: none !important;
      }
      &.parallel.old {
        border-top: 1px solid $darker !important;
        border-bottom: 1px solid $darker !important;
      }
    }
  }
  /* Click to expand button. */
  .btn.click-to-expand {
    padding: 3px;
  }

  // * Merge Requests :: Files.
  .diff-tree-list {
    margin-right: 8px;
    padding: 8px;
    radius: $radius;
    border: 1px solid;
    colors: 0, $darker, $dark;
    // Remove padding on the right side.
    > div { padding: 0; }
    // File border color.
    .tree-list-scroll { colors: 0, $darker, 0; }
    // Files.
    .file-row:hover, .file-row:active { colors: 0, 0, $darker; }
  }

  // * Merge Requests :: New MR.
  .mr-state-widget {
    .mr-source-target {
      padding: 12px 8px;
      min-height: auto;
      colors: 0, $darker, $dark;
    }
    // Description container.
    .mr-section-container {
      radius: $radius;
      colors: 0, $darker, $dark;
      .mr-widget-section {
        padding: 12px 8px;
        colors: 0, $darker, 0;
      }
      // Remove extra padding.
      .media-section > .media { padding: 0px !important; }
      .mr-widget-footer .mr-widget-help { padding: 0 4px; }
      // Rounded corners.
      > section:first-child { radius: $radius $radius 0 0; }
      > div:last-child { radius: 0 0 $radius $radius; }
    }
    // Borders.
    .media-section,
    .mr-widget-heading,
    .mr-widget-footer {
      padding: 12px 8px;
      colors: 0, $darker, $dark;
    }
    // ? Fixes approved merge request element.
    // TODO Rewrite this entire section at some point.
    .mr-widget-content {
      padding: 0 !important;
      .js-mr-approvals { padding: 0 0 0 8px !important; }
    }
    .mr-widget-workflow::before { border-left-color: $darker; }
    // Branch name.
    .label-branch { color: $red, 0, 0; }
  }
  .mr-widget-heading:not(.deploy-heading)::before {
    border-left: 1px solid var(--darker);
  }
  // Text color.
  .mr-state-widget {
    colors: $light, 0, 0;
    .bold { colors: $light, 0, 0; }
    .font-weight-bold, .code-text, .coverage, .diverged-commits-count {
      colors: $lighter, 0, 0;
      a { font-weight: bold; color: $light; }
    }
  }
  // Icon color.
  .git-merge-icon-container { colors: $light, $darker, $darker; }

  /* Merge Requests :: Diff. */
  .mr-version-controls {
    border: 1px solid;
    radius: $radius;
    colors: $light, $darker, $dark;
    > div { border-bottom: none; }
  }

  // * File Diff : Rounded corners.
  .diff {
    // ? Hack for rounded corners w/o hiding overflow.
    &-file, &-content, &-viewer, &-wrap-lines { radius: $radius !important; }
    // ? Rounded corners for the file title.
    &-file .file-title-flex-parent { radius: $radius $radius 0 0 !important; }
    // ? Rounded corner on the last line in side-by-side view.
    &-file .line_holder:last-child > .right-side { radius: 0 0 $radius 0; }
    // ? Rounded corner in the gutters in side-by-side view.
    &-file .line_holder:last-child > .old_line { radius: 0 0 0 $radius; }
  }

  // * File Diff :: Expanded view.
  .diff-expanded {
    > [class*="side"], .diff-line-num, .line_content {
      colors: 0, $darker, $dark;
    }
  }
  /* Fix borders on expanded sections. */
  .diff-expanded + .line_holder .diff-line-num,
  .diff-expanded + .line_holder .line_content {
    border-top-color: $darker !important;
  }
  // Added lines.
  .line_holder .line_content.new .idiff,
  .idiff.addition {
    padding: 0 2px;
    background-color: rgba(149, 200, 99, 0.3) !important;
  }
  .line_holder {
    // Add right border to gutters.
    .diff-line-num {
      border-right: 1px solid $darker !important;
      // ? Makes the a tag in gutters lighter color while it's loading.
      .diff-line-num a { colors: $lighter, 0, 0; }
    }
    // Added lines.
    .diff-line-num.new,
    .line_content.new {
      border-color: $shadow !important;
      background-color: rgba(149, 200, 99, 0.3) !important;
    }
    // Removed lines.
    .diff-line-num.old,
    .line_content.old {
      border-color: var(--shadow) !important;
      background-color: rgba(200, 49, 49, 0.3) !important;
    }
    // Show/hide comments.
    .diff-notes-collapse {
      colors: 0,  $darker, $dark;
      &:hover { colors: 0, 0, $darker; }
    }
  }
  .line_holder .line_content.old .idiff,
  .idiff.deletion {
    padding: 0 2px;
    background-color: rgba(200, 49, 49, 0.3) !important;
  }
  // Matching lines.
  .line_holder .line_content.match {
    colors: $lighter, 0, $dark;
  }
  // Add a comment to this line.
  .line_holder .add-diff-note {
    padding: 0 0 1px 1px;
    colors: $light, $darker, $dark;
    &:hover { colors: 0, 0, $darker; }
  }
  /* Highlight the entire line. */
  .line_holder [class*="side"]:hover,
  .line_holder [class*="noteable"]:hover,
  .line_holder .diff-line-num.is-over,
  .line_holder .diff-line-num.hll:not(.empty-cell).is-over {
    colors: 0, $shadow, $darker;
  }
  /* Text colors. */
  .diff-stats-summary-toggler { color: $blue !important; }
  #diff-stats .cgreen { color: $green; }
  #diff-stats .cred { color: $red; }


  // * Snippets
  .blob-content pre.code,
  .notes pre.code {
    colors: $light, 0, $dark;
  }
  // Edit button.
  .detail-page-header a,
  .snippet-edited-ago {
    color: var(--light);
  }
  // Toggle discussion.
  .note-action-button {
    color: $light;
    &:focus, &:hover { color: $lighter; }
  }
  // Reactions.
  .row-content-block.content-component-block { background-color: $t; }
  // ? Sub-navigation for different sections.
  .snippet-scope-menu {
    padding: 0 8px !important;
    margin-top: 10px !important;
    radius: $radius;
    border: 1px solid;
    colors: 0, $darker, $dark;
  }
  // Snippets list.
  .snippets-list-holder {
    margin-top: 10px;
    border: 1px solid;
    radius: $radius;
    colors: 0, $darker, $dark;
    li {
      transition: all 0.2s ease-in-out;
      &:hover { colors: 0, 0, $darker; }
      &:first-child { radius: $radius $radius 0 0; }
      &:last-child { radius: 0 0 $radius $radius; }
    }
  }
  // Reset styles in reaction area.
  [data-page*="snippets:show"] .row-content-block {
    padding: 8px 0 0 0 !important;
    margin: 0 !important;
    border: none !important;
  }

  // * Project :: Snippets.
  [data-page*="projects:snippets:index"] {
    // Sub-navigation.
    .top-area {
      padding: 0 !important;
      colors: 0, $t, $t;
    }
    .snippet-scope-menu {
      margin-top: 0 !important;
      border-bottom: 1px solid $darker;
    }
  }


  // * File editor.
  // TODO unfinished.
  .file-editor {
    // Fix flashing white background.
    > #editor {
      radius: 0 0 $radius $radius;
      colors: 0, 0, $dark;
    }
    // Header.
    .nav-links {
      margin-bottom: 10px;
      padding: 0 8px;
      radius: $radius;
      colors: 0, $darker, $dark;
    }
    // Branch name.
    .editor-ref { colors: 0, $darker, $darker; }
    // Commit or disband.
    .form-actions {
      padding: 12px 8px;
      radius: $radius;
      border: 1px solid $darker;
    }
  }
  // * Rounded corners for preview mode. c(:
  // ? Overengineered; don't waste time figuring it out. :p
  .file-holder.file-holder-bottom-radius {
    radius: $radius;
    .file-editor #preview {
      .file-holder.diff-file, .diff-content, .wiki {
        margin: 0;
        border: none !important;
        radius: 0 0 $radius $radius !important;
      }
    }
  }
  .text-info { color: $red !important; }
  .template-selectors-menu { border-left-color: $darker; }

  // * Ace editor.
  .ace-tm {
    colors: $light, 0, $dark;
    // Gutter.
    .ace_gutter {
      colors: $lighter, 0, $shadow;
      .ace_gutter-cell { colors: 0, 0, $t; }
    }
    // Highlighted line.
    .ace_gutter-active-line, .ace_active-line { colors: 0, 0, $darker; }
    .ace_selected-word, .ace_selection { colors: 0, $accent, $accent; }
    .ace_cursor { colors: $accent, 0, 0; }
    // Wrap line.
    .ace_print-margin { colors: 0, 0, $darker; }
    // Search/replace popout.
    .ace_search {
      padding: 0 4px;
      margin: 10px 10px 0 0;
      border: 1px solid;
      radius: $radius;
      colors: 0, $darker, $dark;
      box-shadow: 0 4px 8px 0 $shadow;
      // Inputs.
      &_field { colors: $light, 0, $dark; }
      .ace_search_form, .ace_replace_form { colors: 0, $darker, 0; }
      .ace_searchbtn, .ace_replacebtn { colors: 0, $darker, $darker; }
    }
    // Options.
    .ace_search_options {
      margin: 4px 0 0 0;
      text-align: left;
      .ace_button {
        padding: 5px;
        border-radius: 3px;
        colors: $icon, $t, $dark;
        &:hover, &.checked { colors: $accent, 0, $t; }
      }
    }
    // Scroller.
    .ace_scroller.ace_scroll-left { box-shadow: inset 17px 0 16px -16px $dark; }
  }


  // * About page :: Applications.
  // ? https://about.gitlab.com/applications
  .applications {
    // Search area.
    .search-container {
      border: 1px solid;
      colors: $light, $darker, $dark;
      input { colors: $light, 0, $dark; }
      .suggestions {
        colors: 0, 0, $dark;
        li:hover, .hl { radius: $radius; }
        li:hover { colors: 0, 0, $darker; }
        .hl { colors: 0, 0, $accent; }
      }
    }
    // Categories.
    .category-name { colors: $light, 0, 0; }
    .category-applications .tile {
      border: 1px solid;
      colors: 0, $darker, $dark;
    }
    // Scroll.
    .scroll-to-top {
      border: 1px solid;
      colors: $light, $darker, $dark;
    }
    // Source!
    .source-link {
      colors: $light, 0, $darker;
      .external-source-link { colors: $accent, $t, 0; }
    }
  }
  // Footer links.
  footer.footer a {
    colors: $lighter, 0, 0;
    &:hover, &:focus { colors: $accent, 0, 0; }
  }

  // * Docs :: Landing page.
  .landing {
    .landing-header-top { colors: 0, $darker, $darker; }
    // Search.
    .input-container input {
      colors: $light, 0, $darker;
      &:focus { box-shadow: 0 4px 16px -4px $shadow; }
    }
    // Cards.
    .main-topics li {
      border: 1px solid;
      colors: 0, $darker, $dark;
      box-shadow: 0 4px 16px -4px $shadow !important;
    }
    // Header/footer.
    .landing-header, .footer {
      colors: $light, 0, $dark;
      // Created/cookies/edit.
      .source-link { colors: $light, 0, $darker; }
      .source-link a { text-decoration: underline !important; }
    }
  }

  // * Docs :: Search results.
  .algolia-autocomplete {
    [class*="dataset"] { colors: $light, $darker, $dark;
      // Transparentize the content.
      [class*="docsearch-s"] { colors: $light, 0, $t; }
    }
    // Remove shadow.
    .ds-dropdown-menu {
      box-shadow: 0 4px 16px -4px $shadow;
      // Arrow.
      &:before { colors: 0, $darker, $dark; }
    }
    // Header.
    [class*="header"] { colors: $lighter, $darker, 0; }
    // Separator.
    .algolia-docsearch-suggestion--subcategory-column::before,
    .algolia-docsearch-suggestion--content::before { colors: 0, 0, $darker; }
    // Selected.
    [class$="--content"]:hover { colors: 0, 0, $darker; }
    // Matching result.
    [class*="highlight"] { box-shadow: inset 0 -2px 0 0 $accent !important; }
  }

  /* Docs :: Page. */
  [itemtype*="http://schema.org/WebPage"] .header {
    colors: 0, $shadow, $darker;
    // Search button.
    .docsearch {
      radius: $radius !important;
      colors: 0, $darker, $dark;
    }
  }

  // * Main content.
  .main {
    background-color: transparent !important;
    box-shadow: none !important;
    // TOC.
    .doc-nav > ul {
      margin-right: 10px;
      colors: 0, 0, $dark;
    }
    // Remove sidebar.
    *::-webkit-scrollbar { display: none !important; }
    // Alerts.
    .alert-info, blockquote { colors: 0, $blue, $dark; }
    .alert-warning { colors: 0, $red, $dark; }
    .alert.alert-success { colors: 0, $violet, $violet; }
    // Table related.
    table td, table th { colors: 0, $darker, 0; }
    table thead { colors: 0, 0, $darker; }
    // Border colors.
    h2, h3, h4, h5, h6, .edit-on, .comments { colors: 0, $darker, 0; }
    // Text colors.
    a:hover, a:focus { text-decoration: underline; }
    .article-metadata { colors: $light, 0, 0; }
    .highlight.plaintext code { colors: $light, 0, 0; }
    code {
      border: 1px solid;
      colors: $accent, $darker, $dark;
    }
  }




  /* Custom width for fluid layout; enables us to emulate the fixed width layout without altering many elements. */
  .layout-page .container-fluid:not(.container-limited) {
    max-width: var(--width) !important;
  }

  /* Fix bugged left sidebar. */
  @media screen and (max-width: 1200px) {
    /* Cut transitions. */
    .page-with-contextual-sidebar,
    .nav-sidebar,
    .toggle-sidebar-button,
    .close-nav-button,
    .nav-sidebar a {
      transition-duration: 0s !important;
    }
  }


  // * IDE!
  .ide {
    // Text color.
    .ide-view {
      colors: $light, 0, 0;
      // Left sidebar title.
      .context-header > a,
      .ide-review-sub-header { colors: $light, 0, 0; }
    }
    // Status bar.
    .ide-activity-bar, .ide-status-bar { colors: 0, $darker, $dark; }
    // Resize.
    .drag-handle { colors: 0, 0, $dark; }
  }
  // File templates.
  #ide .ide-file-templates { colors: 0, $darker, $dark; }

  // Left sidebar active.
  .ide-sidebar-link {
    transition: 0.2s ease-in-out;
    // On event.
    &:focus, &:hover, &.active {
      colors: $accent, $darker, $darker;
      box-shadow: inset 3px 0 var(--accent) !important;
    }
    &::after { colors: 0, 0, $dark; }
  }

  // * IDE :: File explorer.
  .ide {
    // Tree.
    .multi-file-commit-panel-inner-content {
      colors: 0, $darker, $dark;
      // File in the tree.
      .file-row {
        transition: 0.2s ease-in-out;
        &.is-active, &:hover, &:active { colors: 0, 0, $darker; }
        // File options.
        .ide-entry-dropdown-toggle { colors: $light, 0, $dark; }
      }
    }
    // Commit.
    .multi-file-commit-form {
      colors: 0, $darker, $dark;
      > .commit-form-compact { border-top-color: $darker; }
    }
    // Icons.
    .ide-tree-header button {
      color: var(--icon);
      transition: all 0.2s ease-in-out;
      &[aria-expanded="true"] { colors: 0, 0, $darker; }
    }
  }

  // * IDE :: Merge Requests / Branches.
  .ide-tree-header {
    border-bottom-color: var(--darker);
    // Branch popup.
    .ide-nav-form {
      // Separator.
      .tab-links { colors: 0, $dark, 0; }
      // Inactive tab.
      .nav-links li a:not(.active) { colors: 0, 0, $darker; }
      .border-bottom { border-color: $dark !important; }
      // Search container.
      .filtered-search-wrapper {
        colors: 0, $darker, $dark;
        input { colors: 0, 0, $t; }
      }
      // Project metadata.
      .ide-merge-request-project-path { color: $lighter; }
    }
    // Branch on hover.
    button:hover { colors: $light, 0, $darker; }
  }
  /* Selected. */
  .ide-file-list .file:hover,
  .ide-file-list .file.file-active,
  .multi-file-commit-list-path:hover,
  .multi-file-commit-list-path.is-active {
    background-color: var(--darker);
  }

  // * IDE :: Commit section.
  .ide-view {
    // Borders.
    .ide-commit-list-container.is-first,
    .multi-file-commit-panel-header { colors: 0, $darker, 0; }
    // Remove background on buttons.
    .ide-staged-action-btn { colors: 0, 0, $t; }
    // Commit message.
    .ide-commit-message-field {
      colors: $lighter, 0, $t;
      textarea { colors: $light, 0, 0; }
    }
    // Background after you push a commit.
    .multi-file-commit-panel-success-message { colors: 0, 0, $dark; }
  }

  // * IDE :: Right sidebar.
  .ide-view .multi-file-commit-panel {
    border-color: var(--darker);
    background-color: var(--dark);
  }
  /* Jobs. */
  .ide-view .card-header,
  .ide-view .ide-job-item:not(:last-child) {
    border-color: var(--darker);
  }
  /* Build header. */
  .build-page .top-bar {
    colors: $lighter, $darker, $dark;
    // ? Fix terminal controls header, bug on upstream.
    &.sidebar-expanded { margin-right: 0 !important; }
  }
  /* Build log. */
  .build-page .build-trace {
    radius: 0 0 $radius $radius;
    color: var(--light);
    border: 1px solid var(--darker);
    border-top-color: transparent;
    background-color: var(--dark);
  }
  .build-page .environment-information {
    border-color: var(--darker);
  }
  /* Build sidebar. */
  .build-sidebar .builds-container {
    colors: $light, $darker, $dark;
  }
  .right-sidebar.build-sidebar .link-commit {
    color: var(--accent);
  }
  .build-sidebar .builds-container .build-job:hover {
    background-color: var(--darker) !important;
  }
  /* Red alert. */
  .flash-container .flash-alert {
    border: 1px solid !important;
    colors: $light, $red, $dark;
  }

  // * IDE :: Edit area.
  .multi-file-edit-pane {
   colors: 0, $darker, $dark;
   // Tabs.
   .ide-mode-tabs { colors: 0, $darker, $darker; }
  }
  /* Tabs. */
  .multi-file-tabs {
    background-color: var(--dark);
    box-shadow: inset 0 -1px var(--darker);
    // Items.
    li {
      transition: 0.2s ease-in-out;
      colors: $lighter, $darker, $t;
      &.active, &:hover { colors: $accent, $darker, $darker; }
    }
  }
  // Commit header.
  .ide-commit-editor-header {
    colors: $light, $darker, $dark;
    box-shadow: inset 0 -1px var(--darker);
  }
  // Git additions/deletions.
  .monaco-diff-editor {
    .line-delete {
      border-color: transparent !important;
      background-color: rgba(200, 49, 49, 0.3) !important;
    }
    .char-delete, .char-insert {
      background-color: rgba(0, 0, 0, 0.15) !important;
    }
    .line-insert {
      border-color: transparent !important;
      background-color: rgba(149, 200, 99, 0.3) !important;
    }
  }

  // * IDE :: Monaco editor.
  .monaco-editor {
    colors: $light, 0, $dark;
    // Background.
    &-background { colors: $light, 0, $dark; }
    // TODO figure out what this was. XD
    .scroll-decoration {
      box-shadow: inset 0 6px 6px -6px $dark !important;
    }
    // Gutter.
    .margin {
      colors: 0, $dark, $dark;
      .line-numbers { colors: $lighter, 0, 0; }
    }
    // Current line.
    [class*="current-line"]  { colors: 0, $darker, $darker; }
    // Cursor.
    .cursor { colors: $light, $accent, $accent; }
    // Indent guide.
    .lines-content [class*="cigr"] { box-shadow: inset 1px 0 0 0 $accent !important; }
    // Command palette.
    .monaco-quick-open-widget {
      colors: $light, $darker, $dark;
      box-shadow: $box !important;
      // Focused.
      .monaco-tree-row {
        &:hover, &.focused { colors: $accent, 0, $darker; }
      }
    }
    // Inspect tokens.
    .tokens-inspect-widget { colors: $light, $darker, $dark; }
    // Input.
    .monaco-inputbox {
      colors: $light, $darker, $dark;
      input { colors: $light, 0, $dark; }
    }
    // Resize.
    .monaco-sash { colors: 0, 0, $accent; }
    // Find palette.
    .find-widget {
      colors: 0, 0, $darker;
      box-shadow: $box;
      .button, .label { filter: invert(var(--bg-invert)); }
    }
    // Accessibility.
    .accessibilityHelpWidget {
      colors: $light, $darker, $dark;
      box-shadow: $box;
    }
    // Context menu.
    .context-view {
      colors: 0, 0, $darker;
      box-shadow: 0 2px 8px $shadow;
    }
    // Hover popup.
    .monaco-editor-hover { colors: 0, $shadow, $darker; }
    // Selection.
    .cslr.selected-text { background-color: $darker; }
    // Matching.
    .selectionHighlight { background-color: $darker !important; }
    // Suggestion.
    .tree {
      colors: $light, $darker, $darker;
      box-shadow: $box;
      .focused { colors: $accent, 0, $dark; }
    }
  }
  /* Diff view. */
  .diffOverviewRuler { background-color: var(--dark); }
  /* Git. */
  .dirty-diff-added { background-color: var(--green); }
  .dirty-diff-modified { background-color: var(--blue); }
  // ? Dropdown for file finder.
  .ide-view .dropdown-menu {
    max-height: 500px;
    li button.is-focused { colors: 0, 0, $dark; }
  }

  // * IDE :: Monaco syntax highlighting.
  .monaco-editor {
    .mtk1, .mtk3 { color: $light; }
    .mtk10 { color: $lighter; }
    .mtk4, .mtk20 { color: $red; }
    .mtk8 { color: $green; }
    .mtk5, .mtk6, .mtk23 { color: $blue; }
    .mtk14 { color: $magenta; }
    .mtk22, .mtk12 { color: $cyan; }
    .mtk11 { color: $orange; }
  }


  // * Project :: Code view.
  .code.white {
    color: $light;
    background-color: $dark;
    .line_holder .line_content {
      color: $light;
      background: $t;
      &.new::before, &.old::before { colors: $lighter, 0, 0; }
    }
    // * Gutters.
    .line-numbers {
      colors: $light, 0, $t;
      // Inner gutter.
      .diff-line-num { colors: $lighter, 0, $t; }
    }
    .line_holder {
      // Gutters in file diff.
      .diff-line-num {
        colors: $lighter, $darker, $shadow;
        // Text color.
        a::before { color: $lighter; }
        // ? Hacky solution to add left border to parallel view in file diff.
        &:nth-child(3) { border-left: 1px solid $darker !important; }
      }
    }
    // ? Gutter colors in diff viewer.
    .line_holder .diff-line-num.old {
      border-color: $shadow !important;
      background-color: rgba(200, 49, 49, 0.3) !important;
    }
    .line_holder .diff-line-num.new {
      border-color: $shadow !important;
      background-color: rgba(149, 200, 99, 0.3) !important;
    }
  }
  /* Gutter border. */
  .code.white pre.code,
  .code.white .diff-line-num {
    border-color: var(--darker);
  }
  /* Highlighted line. */
  .code.white pre .hll {
    background-color: var(--darker) !important;
  }
  /* Reset code element in code section. */
  .code code {
    border: 0 !important;
  }

  // * Project :: Code syntax highlighting.
  .code.white {
    .n, .gh { color: $light; }
    .c, .cp, .c1 { color: $lighter; }
    .m, .nv, .na { color: $cyan; }
    .nb, .nc { color: $blue; }
    .ss, .s1, .se, .gu { color: $magenta; }
    .s, .s2, .sx, .sb, .sh, .nf { color: $red; }
    .nt, .si { color: $violet; }
  }


  // * Project CI/CD :: Pipelines.
  // TODO polish mini pipelines.
  .table-holder {
    margin: 10px 0 0 0;
    .ci-table {
      // Pipelines.
      > [class*="row"] {
        padding: 8px 10px;
        border-color: var(--darker);
      }
      // Header.
      th, .table-row-header {
        font-weight: 700;
        color: var(--light);
        border-color: transparent;
        background-color: var(--darker);
      }
      // On hover.
      .commit, .commit > td {
        transition: background 0.15s ease-in-out;
        &:hover, &:hover > td {
          background-color: var(--darker) !important;
        }
      }
      // Mini pipelines.
      .mini-pipeline-graph-dropdown-toggle {
        border-color: var(--darker);
        background-color: var(--darker);
        box-shadow: var(--box-shadow);
      }
      .stage-container:not(:last-child)::after {
        border-color: var(--darker);
      }
    }
  }
  /* Pipeline commit. */
  .commit a,
  .generic_cimmit_status a,
  .pipelines .ci-table .pipeline-id,
  .ci-table .branch-commit .commit-sha {
    color: var(--light);
  }

  // * Project CI/CD :: Pipeline details.
  .pipeline-graph {
    margin-top: 10px;
    radius: $radius;
    border: 1px solid;
    colors: $light, $darker, $dark;
    // Pipeline node.
    .build .build-content {
      border-width: 2px !important;
      colors: $light, $darker, $dark;
      // On event.
      &:hover {
        colors: $light, $darker, $darker;
      }
    }
    // Triangle.
    .cross-project-triangle {
      margin-top: 1px;
      border-left-color: var(--darker);
    }
    // Linked pipeline?
    // ? https://gitlab.com/gitlab-org/gitlab-ce/pipelines/31973329
    .linked-pipeline {
      &-content {
        border-width: 2px !important;
        radius: 10px !important;
        colors: $light, $darker, $dark;
        &:hover {
          colors: 0, 0, $darker;
        }
      }
      &::before {
        margin-top: 2px;
      }
    }
    // Actions.
    .ci-action-icon-container {
      margin: 1px 1px 0 0;
      colors: 0, $darker, $dark;
    }
    /* Connectors. */
    .stage-column .curve::before,
    .stage-column .curve::after,
    .build::before, .build::after {
      border-color: var(--darker) !important;
    }
  }

  // * Pipelines :: Failed Jobs.
  .build-failures {
    .table {
      margin-top: 10px;
      border: 1px solid;
      colors: 0, $darker, $darker;
      // Table header.
      > thead th {
        colors: $light, 0, 0;
      }
    }
    // Log output.
    .build-trace {
      colors: 0, $dark, 0;
      > code {
        colors: $light, $darker, $darker;
      }
    }
    .build-name a {
      color: $accent;
    }
  }

  // * Pipelines :: Security.
  .split-report-section {
    margin-top: 10px;
    border: 1px solid;
    radius: $radius;
    colors: $light, $darker, $dark;
    // Wrapper.
    .report-block-container {
      colors: $light, $darker, $dark;
    }
  }

  // * Jobs :: Show output.
  .build {
    // Breadcrumbs.
    &-header .header-content {
      margin: 4px 0;
      color: $lighter;
      a { color: $light;
        &:hover { color: $accent; }
      }
    }
    // Job details.
    &-light-text { color: $lighter; }
    // Job on hover.
    &s-container a:hover { color: $accent !important; }
  }

  // * Jobs :: Browse artifacts.
  [data-page="projects:artifacts:browse"] {
    .tree-table {
      radius: $radius;
      box-shadow: 0 0 0 1px $darker;
      thead {
        tr, tr > th { border-top: none; }
        th:first-child { radius: $radius 0 0 0; }
        th:last-child { radius: 0 $radius 0 0; }
      }
      tbody {
        tr:last-child {
          td:first-child { radius: 0 0 0 $radius; }
          td:last-child { radius: 0 0 $radius 0; }
        }
      }
      // Remove borders.
      tr {
        border: none !important;
        td {
          border: none !important;
          border-top: 1px solid $darker !important;
        }
      }
      // Item text color.
      .tree-item a { colors: $light, 0, 0; }
    }
  }

  // * Jobs :: Navigation.
  [data-page="projects:commit:pipelines"], [data-page="projects:pipelines:show"] {
    .nav-links:not(.quick-links) {
      margin-top: 10px;
      padding: 0 10px;
      border: 1px solid;
      radius: $radius;
      colors: 0, $darker, $dark;
      a.active { colors: $light, 0, 0; }
    }
    // Mini dropdown items on hover.
    .show .mini-pipeline-graph-dropdown-item:hover { colors: 0, 0, $dark; }
  }

  // * Skeleton.
  // ? Changes color of loading elements.
  .animation-container [class^="skeleton-line-"] {
    background-color: var(--darker);
  }
  .animation-container [class^="skeleton-line-"]::after {
    background-image: linear-gradient(to right, var(--darker) 0%, var(--dark) 100%);
  }


  // * Group header.
  .explore-groups {
    border-color: var(--darker);
    background-color: var(--dark);
  }
  // * Group body.
  .group-list-tree {
    radius: $radius;
    border: 1px solid var(--darker);
    background-color: var(--dark);
    // Make some spacing.
    > .group-row.is-open > ul {
      margin: 10px 0 10px 30px;
    }
    // On event.
    .group-row-contents:hover {
      border-color: var(--mred);
      background-color: var(--darker);
    }
    // Activity?
    .group-row::before,
    .group-list-tree::before {
      border-color: var(--lighter) !important;
      background: var(--lighter) !important;
    }
    .group-row .stats {
      color: var(--light);
    }
  }


  // * Invert image icons.
  // TODO adjust if it causes weird things.
  img[src*="/assets/icon"] {
    filter: invert(1);
  }

  // * Invert illustrations.
  .wiki .anchor,
  .banner-graphic > svg,
  .explore-groups > .svg-container > svg,
  img[src*="/assets/illustrations/"],
  #subgroups_and_projects .empty-state svg {
    filter: opacity(0.9) invert(0.9) hue-rotate(40deg) !important;
  }

  // * Invert `shadow-root (closed)` SVG icons.
  // TODO remove if/when fixed on upstream.
  .created-icon, .opened-icon,
  [class*="ci-status"] svg.s24,
  [class*="ci-status"]:not(#stageDropdown) svg.s16,
  svg.ic-upload {
    fill: black !important;
    // ? bg_invert must be enabled/disabled in Dark-GitLab.
    // ? Doesn't work with ThemeSwitcher (yet, but it might in a future update).
    filter: invert(calc(var(--bg-invert) - 0.2)) hue-rotate(180deg);
  }
  // * CI icons.
  .ci-status {
    &.ci-success, &-icon-success, &-icon-passed {
      colors: $green, $green, $t;
    }
    &.ci-running {
      colors: $blue, $blue, $t;
    }
    &-icon-pending, &-icon-success_with_warnings {
      colors: $orange, $orange, $t;
    }
    &.ci-failed {
      colors: $red, $red, $t;
    }
    &.ci-created, &.ci-skipped,
    &.ci-canceled, &.ci-disabled,
    &.ci-manual, &-icon-skipped {
      colors: $lighter, $shadow, $t;
    }
  }
  // * CI icons on hover.
  .stage-container {
    // Connectors.
    &::after {
      colors: 0, $darker, 0;
    }
    // Icon background.
    .mini-pipeline-graph-dropdown-toggle {
      colors: 0, 0, $darker;
    }
  }

  // * Centers project header elements; old design lookalike.
  if p_header {
    .project-home-panel > div {
      display: flex;
      flex-direction: column;
      > div {
        justify-content: center;
        text-align: center;
      }
    }
    .project-stats .nav { justify-content: center; }
    // Center the description.
    .project-description { margin: 0 auto; }
  }

  // Switch to our version of GitLab logo.
  if dark_logo {
    // 404 logo.
    a[href="/"] > img[alt="GitLab Logo"] {
      height: 0 !important;
      width: 0 !important;
      padding: 210px 0 0 210px !important;
      background: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiIHdpZHRoPSIyMTAiIGhlaWdodD0iMjEwIiB2aWV3Qm94PSIwIDAgMjEwIDIxMCIgaWQ9InN2ZzIiIHZlcnNpb249IjEuMSI+CiAgPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTIyIj4KICAgIAogIDwvbWV0YWRhdGE+CiAgPGRlZnMgaWQ9ImRlZnMyMCI+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhckdyYWRpZW50NDE2NiI+CiAgICAgIDxzdG9wIGlkPSJzdG9wNDE2OCIgb2Zmc2V0PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjojMjEyMTIxO3N0b3Atb3BhY2l0eToxIi8+CiAgICAgIDxzdG9wIGlkPSJzdG9wNDE3MCIgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojMzEzNjNiO3N0b3Atb3BhY2l0eToxIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXJHcmFkaWVudDQxNDIiPgogICAgICA8c3RvcCBzdHlsZT0ic3RvcC1jb2xvcjojNzI4OWRhO3N0b3Atb3BhY2l0eToxIiBvZmZzZXQ9IjAiIGlkPSJzdG9wNDE0NCIvPgogICAgICA8c3RvcCBzdHlsZT0ic3RvcC1jb2xvcjojM2RhZWU5O3N0b3Atb3BhY2l0eToxIiBvZmZzZXQ9IjEiIGlkPSJzdG9wNDE0NiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCB4bGluazpocmVmPSIjbGluZWFyR3JhZGllbnQ0MTQyIiBpZD0ibGluZWFyR3JhZGllbnQ0MTQ4IiB4MT0iOTUuMzc4MTY2IiB5MT0iMTM4LjIzNzQ5IiB4Mj0iMTE1LjY4ODMxIiB5Mj0iMTM4LjcxODQ2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIvPgogICAgPGxpbmVhckdyYWRpZW50IHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDQxNjYiIGlkPSJsaW5lYXJHcmFkaWVudDQxNTgiIHgxPSIxMi41NjMzNzYiIHkxPSI4NS4zMjY3MjkiIHgyPSIxMDUuMDI1OCIgeTI9Ijg1LjEzMTA1OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiLz4KICA8L2RlZnM+CiAgCiAgPHBhdGggc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDQxNTgpO2ZpbGwtb3BhY2l0eToxIiBkPSJNIDM5LjM0Mzc1IDEwLjM0NTcwMyBDIDM3Ljc0MSAxMC4zNDU4MjggMzYuMTM5NTE2IDExLjI2Njg3NSAzNS41NDEwMTYgMTMuMTA5Mzc1IEwgMTIuMjY3NTc4IDg0LjczNDM3NSBMIDY2LjQyMTg3NSA4NC43MzQzNzUgTCA0My4xNDg0MzggMTMuMTA5Mzc1IEMgNDIuNTQ5OTM3IDExLjI2NjM3NSA0MC45NDY1IDEwLjM0NTU3OCAzOS4zNDM3NSAxMC4zNDU3MDMgeiBNIDY2LjQyMTg3NSA4NC43MzQzNzUgTCAxMDUuMDYwNTUgMjAzLjY1NDMgTCAxNDMuNzAxMTcgODQuNzM0Mzc1IEwgNjYuNDIxODc1IDg0LjczNDM3NSB6IE0gMTQzLjcwMTE3IDg0LjczNDM3NSBMIDE5Ny44NTM1MiA4NC43MzQzNzUgTCAxNzQuNTgyMDMgMTMuMTA5Mzc1IEMgMTczLjM4NTAzIDkuNDI0Mzc1IDE2OC4xNzE2MSA5LjQyMzM3NSAxNjYuOTc0NjEgMTMuMTA5Mzc1IEwgMTQzLjcwMTE3IDg0LjczNDM3NSB6IE0gMTk3Ljg1MzUyIDg0LjczNDM3NSBMIDEwNS4wNjA1NSAyMDMuNjU0MyBMIDIwNi42ODk0NSAxMjkuODE2NDEgQyAyMDkuNDkzNDUgMTI3Ljc3OTQxIDIxMC42NjY3IDEyNC4xNjkwNSAyMDkuNTk1NyAxMjAuODczMDUgTCAxOTcuODUzNTIgODQuNzM0Mzc1IHogTSAxMDUuMDYwNTUgMjAzLjY1NDMgTCAxMi4yNjc1NzggODQuNzM0Mzc1IEwgMC41MjczNDM3NSAxMjAuODczMDUgQyAtMC41NDM2NTYyNSAxMjQuMTY5MDUgMC42Mjc2NDA2NSAxMjcuNzc5NDEgMy40MzE2NDA2IDEyOS44MTY0MSBMIDEwNS4wNjA1NSAyMDMuNjU0MyB6ICIgaWQ9InBhdGg0Ii8+CiAgPHBhdGggc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDQxNDgpO2ZpbGwtb3BhY2l0eToxIiBkPSJNIDEyLjI2NzU3OCA4NC43MzQzNzUgTCAxMDUuMDYwNTUgMjAzLjY1NDMgTCA2Ni40MjE4NzUgODQuNzM0Mzc1IEwgMTIuMjY3NTc4IDg0LjczNDM3NSB6IE0gMTA1LjA2MDU1IDIwMy42NTQzIEwgMTk3Ljg1MzUyIDg0LjczNDM3NSBMIDE0My43MDExNyA4NC43MzQzNzUgTCAxMDUuMDYwNTUgMjAzLjY1NDMgeiAiIGlkPSJwYXRoNiIvPgo8L3N2Zz4K") no-repeat !important;
    }

    // * Dark logo mixin.
    // ? dark-logo: $var, 0, 0, 0, 0; $var will just select what you want to apply
    dark-logo(q, w, r, t, y) {
      if q is a 'call' {
        // left ear and cheek
        fill: #212121 !important;
        stroke: var(--shadow);
      }
      if w is a 'call' {
        // right ear and cheek
        fill: #31363b !important;
        stroke: var(--shadow);
      }
      if r is a 'call' {
        // nose
        fill: #303539 !important;
        stroke: var(--shadow);
      }
      if t is a 'call' {
        // left eye
        fill: #7289da !important;
      }
      if y is a 'call' {
        // right eye
        fill: #3daee9 !important;
      }
    }

    // Dark tanuki!
    .tanuki-logo {
      .tanuki-left-ear, .tanuki-left-cheek { dark-logo: $t, 0, 0, 0, 0; }
      .tanuki-right-ear, .tanuki-right-cheek { dark-logo: 0, $t, 0, 0, 0; }
      .tanuki-nose { dark-logo: 0, 0, $t, 0, 0; }
      .tanuki-left-eye { dark-logo: 0, 0, 0, $t, 0; }
      .tanuki-right-eye { dark-logo: 0, 0, 0, 0, $t; }
    }
  }

  // * Custom app background.
  body::before {
    position: fixed;
    z-index: -1;
    content: "";
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-position: var(--bg-pos);
    background-repeat: var(--bg-repeat);
    background-size: var(--bg-size);
    background-image: var(--background);
    filter: invert(var(--bg-invert)) var(--bg-filter);
  }

  // * Code font.
  .gfm-commit, .diff-file table,
  code, .code, pre.code code,
  [class*="monospace"], .ref-name,
  #editor, .monaco-editor * {
    font-family: var(--code-font) !important;
  }

  /* Prevent horizontal scrollbar from showing up when the viewport is overflowed. */
  html {
    overflow-x: hidden;
    background-color: var(--dark);
  }

  // ! What.
  // ? Fixes weird pseudoelements.
  .diff-file .file-title {
    &::before, &-flex-parent::before { display: none !important; }
  }
}

@-moz-document regexp("https?://design.gitlab.com(/.*)") {
  // Loading bar.
  .nuxt-progress { colors: 0, 0, $accent; }
  // Contribute section.
  .contribute { colors: 0, $darker, $dark; }
  // Cards.
  .card--header { colors: 0, $darker, $darker; }
  // Navigation.
  .nav-sidebar {
    colors: 0, $darker, 0;
    &__header {
      colors: 0, $darker, 0;
      &-anchor { colors: $light, 0, 0; }
    }
    // Links.
    summary:hover, details > a:hover { colors: 0, 0, $darker; }
    &__section-items-anchor { colors: $lighter, 0, 0; }
    .nuxt-link-exact-active {
      colors: $light, 0, $darker;
      box-shadow: inset 4px 0 0 $accent !important;
    }
  }
  // Fix color details.
  .palette:not(.neutral) > .color { background-color: $darker; }
  .todo { colors: 0, $darker, $dark; }
  table {
    colors: $light, $darker, $dark;
    thead { colors: 0, $darker, $darker; }
    td, th { colors: 0, $darker, 0; }
    td.header, th.header { colors: 0, $darker, $darker; }
  }
  // Typography spacing.
  .baseline--typography:after { background-image: linear-gradient($darker 1px, $t 0); }
}

// * Code for about page on GitLab.
// ? Might be split into a separate userstyle if it gets quite large.
// ! @RaitaroH takes the full responsibility for this section. (=

@-moz-document regexp("https?://about.gitlab.com(/.*)") {
  .blog.article {
    .body { colors: 0, 0, $dark; }
    .signup, .comments { colors: 0, 0, $t; }
  }
  .sticky-banner {
    colors: 0, 0, $darker;
    box-shadow: 0 0 8px 0 $shadow;
  }
  .gray-section {
    colors: $lighter, $darker, $dark;
  }
  .navbar .navbar-right ul li {
    a, .search-icon {
      colors: $light, $shadow, 0;
      &:hover, &:focus {
        colors: $accent, $shadow, $dark;
      }
    }
    .dropdown {
      colors: $light, $darker, $darker;
      a {
        color: $light !important;
        &:hover {
          color: $accent !important;
        }
      }
    }
  }
  .blog-category-nav ul li {
    color: $lighter !important;
    &:after {
      background-color: $accent !important;
    }
    &:hover {
      color: $accent !important;
    }
  }
  .navbar .sign-up, .navbar .search-icon {
    color: $lighter !important;
    &:hover {
      color: $accent !important;
    }
  }
  .navbar .mobile-icons .mobile-icon .icon-bar {
    background: $lighter !important;
    &:hover {
      background: $accent !important;
    }
  }
  .navbar .mobile-menu {
    background: $dark !important;
    li .dropdown a {
      color: $lighter !important;
      &:hover {
        color: $accent !important;
      }
    }
    li .main-nav-link {
      color: $accent !important;
    }
    ul .sign-up-container {
      background: $darker !important;
      li .sign-up {
        background: $dark !important;
      }
    }
  }


  // Sign up
  .mktoForm input[type="text"], .mktoForm input[type="url"], .mktoForm input[type="email"],.mktoForm input[type="tel"],
  .mktoForm input[type="number"], .mktoForm input[type="date"], .mktoForm select.mktoField, .mktoForm textarea.mktoField {
    colors: $light, $shadow, $dark;
  }
  .newsletter-form .mktoButton {
    colors: $light, $shadow, $dark;
    &:hover {
      colors: $accent, $shadow, $dark;
    }
  }
  .newsletter-form .mktoForm .mktoLogicalField label {
    color: $light !important;
  }

  // Front page
  .sdlc-container .sdlc-table {
    td:not(:last-child), td:not(:last-child), tr:not(:last-child) {
      border-color: $darker !important;
    }
    .competitor-logo-container {
      background-color: $darker !important;
    }
  }

  // Card
  .gke-layer .gke-layer-body, .gke-layer .k8s-layer-media,
  .testimonials-container .testimonials-row .testimonial, .forrester-graphic-title,
  .feature {
    colors: $light, $shadow, $darker;
    box-shadow: $box;
  }
  .u-subtle-bg {
    background-color: $dark;
  }
  .flex-tile-list > .tile {
    colors: $light, $darker, $darker;
  }
  .cta-btn.accent, .cta-btn.accent:hover {
    colors: $lighter, $shadow, $accent;
    box-shadow: $box;
  }
  .panel, .panel-info > .panel-heading {
    colors: $light, $darker, $darker;
  }
  .panel-success > .panel-heading {
    colors: $lighter, $green, $green;
    .panel-title {
      color: $lighter !important;
    }
  }
  .panel-warning > .panel-heading {
    colors: $lighter, $orange, $orange;
    .panel-title {
      color: $lighter !important;
    }
  }
  // Featured Posts cards
  .blog.list {
    .article-information {
      colors: $lighter, $shadow, $darker;
      a {
        color: $accent !important;
      }
    }
    .more, .browse {
      colors: $lighter, $dark, $dark;
      &:hover {
        background-color: $accent !important;
      }
    }
  }
  .blog .callout, .blog .gitlab-trial {
    colors: $lighter, $shadow, $darker;
  }

  // Search
  .search-box {
    colors: $lighter, $darker, $dark;
  }
  .search-input {
    color: $lighter !important;
  }
  .st-ui-injected-overlay-container {
    colors: $lighter, $darker, $dark;
    .st-ui-header, .st-ui-footer {
      colors: $lighter, $darker, $dark;
      input[type="text"] {
        color: $lighter !important;
      }
    }
  }
  a.st-ui-result {
    border-color: $darker !important;
    &:hover .st-ui-type-detail, &:hover .st-ui-type-detail-bold {
      color: $light !important;
    }
  }
  .st-install-Z4n7msKyctXXfJs66EKx .st-ui-result em {
    colors: $accent, $darker, $darker;
  }
  a.st-ui-close-button {
    filter: invert(1);
  }

  // Code
  .command, .alert-warning {
    colors: $accent, $shadow, $darker;
  }
  .panel-body pre {
    colors: $accent, $shadow, $dark;
  }
  .method p a:not(.btn) {
    color: $accent !important;
  }
  .distro-content .display-extra-links li {
    a {
      colors: $accent, $darler, 0;
      background: $t !important;
      text-shadow: none !important;
      text-decoration: none !important;
    }
    &:not(:last-child)::before {
      background-color: $darker !important;
    }
  }

  // Footer
  .footer {
    background-color: $darker !important;
    a:hover {
      color: $accent !important;
    }
  }
  .source-link {
    background-color: $dark !important;
  }

  // Logo
  if dark_logo {
    .wordmark {
      fill: $light !important;
    }

    path.logo-dark-orange-shape:nth-child(5), path.logo-light-orange-shape:nth-child(4),
    .footer-logo path.logo-dark-orange-shape:nth-child(4), .footer-logo path.logo-light-orange-shape:nth-child(3) {
      dark-logo: $t, 0, 0, 0, 0;
    }
    path.logo-light-orange-shape:nth-child(7),
    .footer-logo path.logo-svg-shape:nth-child(1) {
      dark-logo: 0, $t, 0, 0, 0;
    }
    path.logo-dark-orange-shape:nth-child(2), path.logo-svg-shape:nth-child(8),
    .footer-logo path.logo-dark-orange-shape:nth-child(7), .footer-logo path.logo-light-orange-shape:nth-child(6) {
      dark-logo: 0, 0, $t, 0, 0;
    }
    path.logo-orange-shape:nth-child(3),
    .footer-logo path.logo-orange-shape:nth-child(2) {
      dark-logo: 0, 0, 0, $t, 0;
    }
    path.logo-orange-shape:nth-child(6),
    .footer-logo path.logo-orange-shape:nth-child(5) {
      dark-logo: 0, 0, 0, 0, $t;
    }
  }
}

// * Code for forum on GitLab.
// ? Might be split into a separate userstyle if it gets quite large.
// ! @RaitaroH takes the full responsibility for this section. (=
@-moz-document regexp("https?://forum.gitlab.com(/.*)") {
  nav#bar {
    background: $darker !important;
    li a:hover {
      color: $accent !important;
    }
  }
  .d-header {
    colors: 0, $shadow, $darker;
    box-shadow: $box;
    .icon:hover, .icon:focus,
     &-icons .active .icon, &-icons .active .icon::after {
       colors: 0, $shadow, $dark;
     }
    .d-header-icons .d-icon:hover {
      color: var(--accent) !important;
    }
  }
  // Logo
  if dark_logo {
    .d-header .title{
      background: url("https://gitlab.com/vednoc/dark-gitlab/raw/forum/images/forum_navbar.png") no-repeat !important;
      background-size: 141px 50px !important;
      margin-top: -5px !important;
      #site-logo {
        opacity: 0;
        margin-top: 0 !important;
      }
    }
  }

  // Burger
  .menu-panel ul.menu-links li a:hover, .menu-panel ul.menu-links li a:focus, .menu-panel ul li.heading a:hover, .menu-panel ul li.heading a:focus {
    colors: 0, $shadow, $dark;
  }

  // Search
  .menu-panel {
    colors: 0, $shadow, $darker;
    box-shadow: $box !important;
  }
  input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"],
  input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"],
  input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"] {
    colors: $lighter, $shadow, $shadow;
  }
  input[type="text"]:focus, input[type="password"]:focus, input[type="datetime"]:focus, input[type="datetime-local"]:focus,
  input[type="date"]:focus, input[type="month"]:focus, input[type="time"]:focus, input[type="week"]:focus, input[type="number"]:focus,
  input[type="email"]:focus, input[type="url"]:focus, input[type="search"]:focus, input[type="tel"]:focus, input[type="color"]:focus {
    box-shadow: none !important;
    border-color: $accent !important;
  }
  // Advanced search
  .search-container .search-advanced-sidebar .search-advanced-title,
  .search-container .search-advanced-sidebar .search-advanced-filters {
    background: $darker !important;
  }
   div.ac-wrap, .select-kit.combo-box .select-kit-header, .select-kit.multi-select .multi-select-header {
    colors: 0, $shadow, $dark
    &.is-focused { // TODO vednoc, tagged focused isn't styled
      box-shadow: none !important;
      border-color: $accent !important;
    }
  }
  // > dropdowns
  .select-kit.combo-box .select-kit-filter,
  .select-kit.combo-box .select-kit-row {
    colors: 0, $shadow, $dark;
  }
  .select-kit .select-kit-row.is-highlighted {
    background-color: $darker !important;
  }
  .badge-wrapper.bar span.badge-category,
  .select-kit.combo-box.category-chooser .select-kit-row .topic-count {
    color: $lighter !important;
  }


  // Topic filter
  .list-controls .combo-box .combo-box-header,
  .nav-pills > li > a {
    colors: $lighter, $shadow, $darker;
    &:hover {
      transform: translateY(-2px);
    }
  }
  .select-kit.dropdown-select-box.period-chooser .period-chooser-header h2.selected-name {
    .top-date-string {
      color: $lighter !important;
    }
    .date-section {
      color: $accent !important;
    }
  }
  // Filter dropdown by date
  .select-kit .select-kit-collection {
    background-color: $darker !important;
  }
  .select-kit .select-kit-row.is-selected.is-highlighted, .select-kit .select-kit-row.is-selected,
  .select-kit .select-kit-row:hover /*li hover*/ {
    background-color: $dark !important;
  }
  .select-kit.dropdown-select-box {
    .select-kit-body {
      border-color: $shadow !important;
      box-shadow: $box !important;
    }
    // Date
    &.period-chooser .period-chooser-row .date-section {
      color: $accent !important;
    }
    // Info
    &.period-chooser .period-chooser-row .top-date-string {
      color: $lighter !important;
    }
  }

  // Topic list
  .topic-list th {
    color: $lighter !important;
  }
  .topic-list {
    .topic-excerpt {
      color: $light !important;
    }
    .main-link a.title {
      color: $accent !important;
      &:visited {
        color: $lighter !important;
      }
    }
    .sortable:hover {
      background-color: $darker !important;
    }
    tr, tbody {
      border-color: $darker !important;
    }
    tr:hover > td {
      background-color: $darker !important;
    }
  }
  // Topic numbers
  .topic-list .num {
    color: $light !important;
  }
  // Heatmap for topic number
  .heatmap-high, .heatmap-high a {
    color: $red !important;
  }
  .heatmap-med, .heatmap-med a {
    color: $orange !important;
  }
  .heatmap-low, .heatmap-low a {
    color: $yellow !important;
  }
  // Last visit
  .topic-list .topic-list-item-separator td {
    border-color: $accent !important;
    span {
      colors: $accent, $shadow, $darker;
    }
  }
  // Tags
  .discourse-tag.simple, .discourse-tag.simple:visited, .discourse-tag.simple:hover {
    color: $lighter !important;
  }

  // Topic bodies
  #topic-title h1 a, .topic-link {
    color: $accent !important;
  }
  .topic-body, .topic-avatar, .topic-status-info {
    border-color: $darker !important;
  }
  .post-links-container {
    .post-links {
      border-color: $darker !important;
    }
    ul li a[href] {
      color: $light !important;
    }
  }
  // Topic animation
  .topic-body {
    animation: 0s !important;
    &.highlighted {
      animation: 0s !important;
    }
  }
  // Pinned topics
  .names span a {
    color: $lighter !important;
  }
  .small-action {
    border-color: $darker !important;
    .small-action-desc {
      color: $light !important;
    }
  }
  // Mods
  .moderator .clearfix > .topic-meta-data > .names span.user-title, .moderator .nav-pills > .topic-meta-data > .names span.user-title,
  .moderator .container > .topic-meta-data > .names span.user-title, .moderator .wrap > .topic-meta-data > .names span.user-title,
  /*post*/ .moderator .regular > .cooked {
    colors: $accent, 0, $darker;
  }
  .alert.alert-info {
    colors: $lighter, 0, $darker;
  }
  // @ mentions
  a.mention, a.mention-group {
    colors: $accent, 0, $darker;
  }
  // code
  .topic-post {
    p > code, li > code, pre > code, blockquote {
      colors: $lighter, $darker, $darker;
    }
  }
  .quote-button {
    colors: $lighter, $shadow, 0;
    background-color: black !important;
    box-shadow: $box !important;
    &:hover, &:hover > .fa {
      color: $accent !important;
    }
  }
  aside.quote .title {
    colors: $light, $accent, $darker;
  }

  // Badges
  // in topics
  .badge-notification {
    colors: $accent, 0, $darker;
  }
  // in badges page and user pages
  .badge-card {
    colors: 0, $shadow, $darker;
    .badge-contents .badge-info {
      background: $t !important;
      border: none !important;
      color: $lighter !important;
      h3 {
        color: $accent !important;
      }
    }
  }
  .badge-card .badge-contents .badge-icon {
     &.badge-type-gold .fa {
       color: $yellow !important;
     }
     &.badge-type-silver .fa {
       color: $light !important;
     }
     &.badge-type-bronze .fa {
       color: $orange !important;
     }
  }

  // Like and share buttons
  nav.post-controls {
    *:hover {
      background-color: transparent !important;
      & > .fa {
        color: $accent !important;
      }
    }
    // TODO vednoc: is this code wrong? on hover it should make the count blue
    .like-button {
      .like-count {
        color: $light !important;
      }
      &:hover {
        .like-count {
          color: $accent !important;
          &.d-hover {
            color: $accent !important;
          }
        }
      }
    }
  }
  #share-link {
    background: $darker;
    div > a:hover > .fa {
      color: $accent !important;
    }
  }
  // Reply
  nav.post-controls button.create {
    color: $light !important;
    &:hover {
      color: $accent !important;
    }
  }

  // Topic map
  .topic-map {
    colors: 0, $shadow, $darker;
    section {
      border-color: $shadow !important;
    }
    .buttons .btn, .link-summary .btn {
      colors: 0, $shadow, $darker;
    }
    .map .number, .map i, span.domain {
      color: $light !important;
    }
    td {
      background-color: $t !important;
    }

  }
  // Timeline
  .timeline-container .topic-timeline {
    .timeline-handle {
      background-color: $lighter !important;
    }
    .timeline-scrollarea {
      border-color: $lighter !important;
    }
    .timeline-replies {
      color: $lighter !important;
    }
    .timeline-ago, .start-date, .now-date {
      color: $light !important;
    }
  }
  .timeline-container.timeline-fullscreen,
  #topic-progress, #topic-progress .bg {
    colors: $lighter, $shadow, $darker;
    box-shadow: $box;
    .topic-timeline .username, .topic-timeline .title a {
      color: $accent !important;
    }
  }

  // New topic modal / comment modal
  .open .grippie {
    background: $accent !important;
  }
  #reply-control {
    colors: $light, $shadow, $darker;
    box-shadow: $box !important;
    .reply-to .composer-action-title .action-title,
    #draft-status, #file-uploading {
      color: $light !important;
    }
    .save-or-cancel .cancel {
      color: $lighter !important;
      &:hover {
        color: $red !important;
      }
    }
  }
  .select-kit.dropdown-select-box.composer-actions .select-kit-header {
    &:hover, &:focus {
      colors: $icon, $t, $dark;
    }
    .d-icon {
      border-color: $t;
    }
  }
  .select-kit.dropdown-select-box {
    .select-kit-body {
      colors: $light, $shadow, $darker;
      box-shadow: $box;
    }
    &.toolbar-popup-menu-options .select-kit-row {
      colors: $lighter, 0, $dark;
      &:hover .name {
        color: $accent !important;
      }
     }
    &.toolbar-popup-menu-options .select-kit-row .name, &.toolbar-popup-menu-options .select-kit-row .d-icon {
      color: $light !important;
    }
    .select-kit-row .texts .name {
      color: $accent !important;
    }
    .select-kit-row .texts .desc {
      color: $light !important;
    }
  }
  .composer-popup {
    colors: $lighter, $shadow, $dark;
  }

  // User pages
  .user-content {
    background-color: $dark !important;
  }
  .user-main .about {
    .details, &.collapsed-info .details {
      colors: 0, $shadow, $darker;
    }
    &.collapsed-info .controls ul a, & .controls a {
      colors: $light, 0, $darker;
    }
    .secondary {
      colors: 0, $shadow, $darker;
      dt {
        color: $light !important;
      }
      dd {
        color: $lighter !important;
      }
    }
  }
  .stats-section .value {
    color: $light !important;
  }
  .user-main .d-icon-heart {
    color: $red !important;
  }
  // Top borders
  .top-sub-section li {
    border-color: $darker !important;
  }
  // Other user names
  .user-info .user-detail .username a {
    color: $lighter !important;
  }
  .user-info .user-detail .name {
    color: $light !important;
  }
  // Top links
  .links-section .domain {
    color: $light !important;
  }
  // date
  .top-sub-section .topic-info {
    color: $light !important;
  }
  // User activity
  .user-stream .item, .user-stream .user-stream-item {
    colors: 0, $shadow, $darker;
  }
  .user-stream .time, .user-stream .delete-info {
    color: $light !important;
  }
  .user-navigation .nav-stacked a, .form-vertical .controls > .btn[href] {
    color: $lighter !important;
  }
  // Logged user settings
  .user-preferences {
    .static {
       color: $lighter !important;
    }
    .instructions {
      color: $light !important;
    }
  }

  // About
  .user-preferences .bio-composer, .group-form-bio, .edit-category-tab-topic-template {
    border-color: $shadow !important;
    & .d-editor-preview {
      background-color: $dark !important;
    }
    & textarea {
      color: $light !important;
    }
  }
  .d-editor {
    &-spacer {
      background-color: $shadow !important;
    }
    &-button-bar {
      border-color: $shadow !important;
    }
    &-textarea-wrapper {
      colors: $light, $shadow, $darker;
    }
    // insert link
    & .d-editor-modal {
      colors: $light, $shadow, $dark;
    }
    &-textarea-wrapper textarea {
      colors: $light, $shadow, $dark;
    }
  }
  // emoji
  .emoji-picker {
    colors: $light, $shadow, $darker;
    box-shadow: $box;
    .categories-column {
      colors: 0, $shadow, $darker;
    }
    .filter {
      border-color: $shadow !important;
      .clear-filter .fa, .d-icon-search .fa {
        color: $icon !important;
      }
      .clear-filter:hover .fa, .d-icon-search:hover {
        color: $accent !important;
      }
    }
    .section-header .title {
      color: $lighter !important;
    }
    .section-group button.emoji:hover, .results button.emoji:hover {
      background-color: $dark !important;
    }
    .footer {
      border-color: $shadow !important;
    }
  }
  // upload image
  .uploaded-image-preview {
    background-color: $darker !important;
  }
  .upload-selector .radios .inputs input[type="file"] {
    color: $light !important;
  }
  // modals
  .modal {
    &-inner-container {
      colors: $light, $shadow, $dark;
      box-shadow: $box !important;
    }
    .modal-body label {
      color: $lighter !important;
    }
  }

  // Notifications
  .user-menu .notifications li {
    colors: $light, $shadow, $darker;
    $:hover, &:focus {
      background-color: $dark !important;
    }
    span {
      color: $accent !important;
    }
  }
  div.menu-links-header a {
    color: $lighter;
    &:hover, &:focus {
      colors: $accent, 0, $dark;
      .fa {
        color: $accent !important;
      }
    }
  }

  // Login
  // done
  #simple-container {
    background-color: $darker;
  }
  .login-modal #login-buttons:not(.hidden), .create-account #login-buttons:not(.hidden) {
    border-color: $shadow !important;
  }
  button#login-link, button#new-account-link {
    color: $lighter !important;
  }
  #login-form a {
    color: $light !important;
  }

  // History
  .modal.history-modal {
    #revision-details, tbody {
      border-color: $shadow !important;
    }
    .diff-ins {
      colors: $lighter, 0, $green;
    }
  }
}

// * Code for docs page on GitLab.
// ? Might be split into a separate userstyle if it gets quite large.
// ! @RaitaroH takes the full responsibility for this section. (=

@-moz-document regexp("https?://docs.gitlab.com(/.*)") {
  // Navbar
  .landing .scrolling-header {
    box-shadow: $box;
  }
  .landing .header-link:hover p {
    color: $accent !important;
  }

  // Search
  // TODO vednoc: find that bloody orange box-shadow
  .landing .input-container img {
    filter: invert(1);
  }

  // Cards
  .main-topics li .wrapper h2 {
    border-color: $darker !important;
  }
  .landing .topics-container .topic:hover {
    opacity: 1 !important;
    h4, p {
      color: $accent !important;

    }
  }

  // Footer
  .footer {
    background-color: $darker;
    a:hover {
      .fa{
        color: $accent !important;
      }
    }
  }
  .source-link {
    colors: $lighter, $darker, $dark;
    a {
      color: $accent !important;
    }
  }


  // Logo
  if dark_logo {
    .landing .landing-header-top .logo, .header img {
      height: 0 !important;
      width: 0 !important;
      padding: 40px 0 0 40px !important;
      background-image: url("https://gitlab.com/vednoc/dark-gitlab/raw/master/images/docs_logo.png") !important;
      background-size: 40px 40px;
      background-repeat: no-repeat;
    }

    .footer-logo path.logo-dark-orange-shape:nth-child(4), .footer-logo path.logo-light-orange-shape:nth-child(3) {
      dark-logo: $t, 0, 0, 0, 0;
    }
    .footer-logo path.logo-svg-shape:nth-child(1) {
      dark-logo: 0, $t, 0, 0, 0;
    }
    .footer-logo path.logo-dark-orange-shape:nth-child(7), .footer-logo path.logo-light-orange-shape:nth-child(6) {
      dark-logo: 0, 0, $t, 0, 0;
    }
    .footer-logo path.logo-orange-shape:nth-child(2) {
      dark-logo: 0, 0, 0, $t, 0;
    }
    .footer-logo path.logo-orange-shape:nth-child(5) {
      dark-logo: 0, 0, 0, 0, $t;
    }
  }

  // Actual docs
  h1 {
    border-color: $accent !important;
  }
  .main {
    border: none;
    img { box-shadow: none !important; }
    .comments {
      margin: 0 auto -45px auto;
      radius: $radius;
      colors: 0, 0, $darker;
      .nav-tabs {
        border-color: $dark;
        li a { colors: $lighter, $dark, $darker; }
        li.active a {
          border-bottom: none !important;
          colors: $light, $accent, $t;
        }
      }
      // Buttons.
      .comments-filter a.comments-holder {
        colors: 0, $dark, $dark;
        box-shadow: none !important;
      }
      .tab-content .row { border-bottom-color: $dark; }
    }
  }
  .anchor {
    filter: invert(1);
  }
  .badge-small:hover::after {
    colors: $accent, $shadow, $darker;
    box-shadow: $box !important;
  }

  // * Left sidebar.
  .global-nav {
    colors: 0, 0, $dark;
    a.active { colors: $lighter, $accent, $darker; }
    &-block-top a { color: $light; text-shadow: none; }
    &-link {
      color: $lighter;
      box-shadow: none !important;
      transition: all 0.15s ease-in-out;
      &:hover, &:focus {  colors: $light, 0, $darker; }
    }
  }
}
